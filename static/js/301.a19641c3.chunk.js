"use strict";(self.webpackChunkcube_tracker=self.webpackChunkcube_tracker||[]).push([[301],{42:(e,t,n)=>{n.d(t,{JP:()=>u,Jy:()=>l});var r=2**53,i=2097152,a=11,o=new Uint32Array(2);function s(){globalThis.crypto.getRandomValues(o);const e=o[0],t=o[1];return Math.floor(e*i)+(t>>a)}function u(e){var t,n;for(!function(e){if("number"!==typeof e||e<0||Math.floor(e)!==e)throw new Error("randomUIntBelow() not called with a positive integer value.");if(e>r)throw new Error(`Called randomUIntBelow() with max === ${e}, which is larger than JavaScript can handle with integer precision.`)}(e);;)if(t=s(),(n=Math.floor(t/e)*e)<=r-e)return t-n}function l(e){return e[u(e.length)]}},301:(e,t,n)=>{var r=n(290),i=n(528),a=n(908),o=class extends a.wr{traverseAlg(e){let t=0;for(const n of e.childAlgNodes())t+=this.traverseAlgNode(n);return t}traverseGrouping(e){return this.traverseAlg(e.alg)*Math.abs(e.amount)}traverseMove(e){return 1}traverseCommutator(e){return 2*(this.traverseAlg(e.A)+this.traverseAlg(e.B))}traverseConjugate(e){return 2*this.traverseAlg(e.A)+this.traverseAlg(e.B)}traversePause(e){return 1}traverseNewline(e){return 0}traverseLineComment(e){return 0}};(0,a.RU)(o);var s=class extends a.wr{constructor(e){super(),this.metric=e}traverseAlg(e){let t=0;for(const n of e.childAlgNodes())t+=this.traverseAlgNode(n);return t}traverseGrouping(e){const t=e.alg;return this.traverseAlg(t)*Math.abs(e.amount)}traverseMove(e){return this.metric(e)}traverseCommutator(e){return 2*(this.traverseAlg(e.A)+this.traverseAlg(e.B))}traverseConjugate(e){return 2*this.traverseAlg(e.A)+this.traverseAlg(e.B)}traversePause(e){return 0}traverseNewline(e){return 0}traverseLineComment(e){return 0}},u=class extends a.wr{traverseAlg(e){let t=0;for(const n of e.childAlgNodes())t+=this.traverseAlgNode(n);return t}traverseGrouping(e){const t=e.alg;return this.traverseAlg(t)*Math.abs(e.amount)}traverseMove(e){return 1}traverseCommutator(e){return 2*(this.traverseAlg(e.A)+this.traverseAlg(e.B))}traverseConjugate(e){return 2*this.traverseAlg(e.A)+this.traverseAlg(e.B)}traversePause(e){return 1}traverseNewline(e){return 1}traverseLineComment(e){return 1}};function l(e){return"A"<=e&&e<="Z"}function c(e){const t=e.family;return l(t[0])&&"v"===t[t.length-1]||"x"===t||"y"===t||"z"===t||"T"===t?0:1}var m=(0,a.RU)(s,[function(e){const t=e.family;return l(t[0])&&"v"===t[t.length-1]||"x"===t||"y"===t||"z"===t||"T"===t?0:1}]);(0,a.RU)(s,[function(e){return 1}]),(0,a.RU)(s,[function(e){return Math.abs(e.amount)*c(e)}]),(0,a.RU)(s,[c]),(0,a.RU)(u,[]);var d=n(342),p=n(625),f=n(453);n(42);var h=class{constructor(e,t,n){this.kpuzzle=e,this.sgs=t,this.searchMoves=function(e,t){const n=[];for(const r of t){const t=new a.yU(r);if(1!==t.amount)throw new Error("SGS cannot handle def moves with an amount other than 1 yet.");let i=e.identityTransformation();for(let e=1;i=i.applyMove(t),!i.isIdentityTransformation();e++)n.push({move:t.modified({amount:e}),transformation:i})}return n}(this.kpuzzle,n??Object.keys(this.kpuzzle.definition.moves))}searchMoves;async solve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2?arguments[2]:void 0;const r=e.experimentalToTransformation();if(!r)throw new Error("distinguishable pieces are not supported in tremble solver yt");let i=null,o=1e6;const s=(e,t,r)=>{if(0===t){const t=this.sgsPhaseSolve(e,o);if(!t)return;const a=r.concat(t).experimentalSimplify({cancel:{directional:"any-direction",puzzleSpecificModWrap:"canonical-centered"},puzzleSpecificSimplifyOptions:{quantumMoveOrder:n}}),s=m(a);return void((null===i||s<o)&&(i=a,o=s))}for(const n of this.searchMoves)s(e.applyTransformation(n.transformation),t-1,r.concat([n.move]))};for(let u=0;u<=t;u++)s(r,u,new a.BE);if(null===i)throw new Error("SGS search failed.");return i}sgsPhaseSolve(e,t){const n=new a.MF;let r=e;for(const i of this.sgs.ordering){const e=i.pieceOrdering;let a="";const o=r.invert();for(let t=0;t<e.length;t++){const n=e[t],r=n.orbitName,i=n.permutationIdx;a+=` ${o.transformationData[r].permutation[i]} ${o.transformationData[r].orientationDelta[i]}`}const s=i.lookup[a];if(!s)throw new Error("Missing algorithm in sgs or esgs?");if(n.experimentalPushAlg(s.alg),n.experimentalNumAlgNodes()>=t)return null;r=r.applyTransformation(s.transformation);for(let t=0;t<e.length;t++){const n=e[t],i=n.orbitName,a=n.permutationIdx;if(r.transformationData[i].permutation[a]!==a||0!==r.transformationData[i].orientationDelta[a])throw new Error("bad SGS :-(")}}return n.toAlg()}},w=(0,i.HT)(async()=>n.e(784).then(n.bind(n,784)));async function y(e,t,n){const{wasmTwsearch:r}=await w;return r(e,t,n)}var g=(0,i.HT)(()=>n.e(294).then(n.bind(n,294))),x=null;async function v(){await async function(){return x||(x=(async()=>{const e=await(await g).cachedData222();return new h(await p.SB["2x2x2"].kpuzzle(),e,"URFLBD".split(""))})())}()}var D=(0,i.HT)(()=>Promise.all([n.e(137),n.e(475)]).then(n.bind(n,137))),R=[[null,"x","x2","x'","z","z'"],[null,"y","y2","y'"]];async function S(){return(await D).initialize()}async function L(){return(0,d.l5)(),(await D).random444Scramble()}async function b(){return(0,d.Rz)(await L(),R)}var F=(0,i.HT)(()=>n.e(884).then(n.bind(n,884)));(0,i.HT)(()=>n.e(122).then(n.bind(n,122)));async function B(){return(0,d.l5)(),new a.BE(await(await F).getRandomFTOScramble())}var E=(0,i.HT)(()=>n.e(865).then(n.bind(n,865)));async function U(){return(0,d.l5)(),(await E).getRandomKilominxScramble()}var N=(0,i.HT)(()=>n.e(758).then(n.bind(n,758)));async function z(){return(0,d.l5)(),new a.BE(await(await N).randomMasterTetraminxScrambleString())}var k=null;async function A(e){(0,d.l5)();const t=await async function(){return k||(k=(async()=>{const e=await(await g).cachedSGSDataMegaminx();return new h(await(await g).cachedMegaminxKPuzzleWithoutMO(),e,["U","R","F","L","BR","BL","FR","FL","DR","DL","B","D"])})())}(),n=structuredClone(e.patternData);n.CENTERS.orientation=new Array(12).fill(0);const r=new f.EZ(await(await g).cachedMegaminxKPuzzleWithoutMO(),n);return await t.solve(r,2,()=>5)}var P=null;async function C(e){(0,d.l5)();const t=await async function(){return P||(P=(async()=>{const e=await(await g).sgsDataPyraminx();return new h(await p.SB.pyraminx.kpuzzle(),e,"RLUB".split(""))})())}();return await t.solve(e,3,()=>3)}var I=(0,i.HT)(()=>n.e(122).then(n.bind(n,122)));async function T(){return(0,d.l5)(),(await I).getRandomRediCubeScramble()}var O=null;async function M(e){(0,d.l5)();const t=await async function(){return O||(O=(async()=>{const e=await(await g).sgsDataSkewb();return new h(await(await g).skewbKPuzzleWithoutMOCached(),e,"RLUB".split(""))})())}(),n=await t.solve(await async function(e){return new f.EZ(await(await g).skewbKPuzzleWithoutMOCached(),{CORNERS:e.patternData.CORNERS,CENTERS:{pieces:e.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}})}(e),3,e=>"y"===e.family?4:3);return n}(0,d.$p)(!0);var K=!0;function G(){return("undefined"===typeof performance?Date:performance).now()}async function q(e,t,n){if(!K)return t();const r=G(),i=t();i?.then&&await i;const a=G();return console.warn(`${e}${n?.isPrefetch?" (prefetched)":""}: ${Math.round(a-r)}ms`),i}var W,_=new Map,Z=null;async function $(e,t){return W=(async()=>{function n(){return q(`wasmRandomScrambleForEvent(${JSON.stringify(e)})`,()=>async function(e){const{wasmRandomScrambleForEvent:t}=await w;return t(e)}(e),{isPrefetch:t?.isPrefetch})}switch(await W,e){case"222":return(await n()).experimentalSimplify({puzzleSpecificSimplifyOptions:{quantumMoveOrder:()=>4}});case"555":case"666":case"777":case"333fm":case"minx":case"pyram":case"skewb":case"sq1":case"555bf":case"baby_fto":return n();case"333":case"333oh":case"333ft":return q("random333Scramble",d.aL,{isPrefetch:t?.isPrefetch});case"333bf":case"333mbf":return q("random333OrientedScramble",d.UG);case"444":return q("random444Scramble",L,{isPrefetch:t?.isPrefetch});case"444bf":return q("random444OrientedScramble",b);case"fto":return q("randomFTOScramble",B,{isPrefetch:t?.isPrefetch});case"master_tetraminx":return q("randomMasterTetraminxScramble",z);case"kilominx":return q("randomKilominxScramble",U,{isPrefetch:t?.isPrefetch});case"redi_cube":return q("randomRediCubeScramble",T,{isPrefetch:t?.isPrefetch});default:throw new Error(`unsupported event: ${e}`)}})()}var V="auto",Q={initialize:async e=>{switch(e){case"222":return q("preInitialize222",v);case"333":case"333oh":case"333ft":return q("initialize333",d.ow);case"444":return q("initialize444",S);default:throw new Error(`unsupported event: ${e}`)}},setScramblePrefetchLevel(e){V=e},randomScrambleForEvent:async e=>{let t=_.get(e);return t?_.delete(e):t=$(e),"none"!==V&&t.then(()=>{Z&&clearTimeout(Z),Z=setTimeout(()=>{_.set(e,$(e,{isPrefetch:!0}))},"immediate"===V?0:1e3)}),t},randomScrambleStringForEvent:async e=>(await Q.randomScrambleForEvent(e)).toString(),solve333ToString:async e=>{const t=new f.EZ(await p.SB["3x3x3"].kpuzzle(),e);return(await(0,d.LW)(t)).toString()},solve222ToString:async e=>{const t=new f.EZ(await p.SB["2x2x2"].kpuzzle(),e);return(await async function(e){return(0,d.l5)(),y((await p.en.kpuzzle()).definition,e,{generatorMoves:"UFLR".split("")})}(t)).toString()},solveSkewbToString:async e=>{const t=new f.EZ(await p.SB.skewb.kpuzzle(),e);return(await M(t)).toString()},solvePyraminxToString:async e=>{const t=new f.EZ(await p.SB.pyraminx.kpuzzle(),e);return(await C(t)).toString()},solveMegaminxToString:async e=>{const t=new f.EZ(await p.SB.megaminx.kpuzzle(),e);return(await A(t)).toString()},setDebugMeasurePerf:async e=>{K=e},solveTwsearchToString:async(e,t,n)=>{const r=new f.e1(e),i=new f.EZ(r,t);return(await y(e,i,n)).toString()}};(0,r.p)(Q)},342:(e,t,n)=>{n.d(t,{$p:()=>l,LW:()=>R,Rz:()=>m,UG:()=>F,aL:()=>S,l5:()=>c,ow:()=>L});var r=n(625),i=n(528),a=n(453),o=n(908),s=n(42),u=!1;function l(e){u=e}function c(){if(!u)throw new Error("Must be called from inside a worker, to avoid impact on page performance. Try importing from the top level of `cubing/solve`?")}function m(e,t){const n=new o.MF;n.experimentalPushAlg(e);for(const r of t){const e=(0,s.Jy)(r);null!==e&&n.push(o.yU.fromString(e))}return n.toAlg()}var d=(0,i.HT)(()=>n.e(649).then(n.bind(n,649))),p="UF UR UB UL DF DR DB DL FR FL BR BL".split(" "),f="UFR URB UBL ULF DRF DFL DLB DBR".split(" "),h="U L F R B D".split(" "),w=[[1,2,0],[0,2,0],[1,1,0],[0,3,0],[2,0,0],[0,1,0],[1,3,0],[0,0,0],[1,0,0],[1,0,2],[0,1,1],[1,1,1],[0,8,1],[2,3,0],[0,10,1],[1,4,1],[0,5,1],[1,7,2],[1,3,2],[0,0,1],[1,0,1],[0,9,0],[2,2,0],[0,8,0],[1,5,1],[0,4,1],[1,4,2],[1,5,0],[0,4,0],[1,4,0],[0,7,0],[2,5,0],[0,5,0],[1,6,0],[0,6,0],[1,7,0],[1,2,2],[0,3,1],[1,3,1],[0,11,1],[2,1,0],[0,9,1],[1,6,1],[0,7,1],[1,5,2],[1,1,2],[0,2,1],[1,2,1],[0,10,0],[2,4,0],[0,11,0],[1,7,1],[0,6,1],[1,6,2]];function y(e,t){return e.slice(t)+e.slice(0,t)}function g(e){const t=function(e){const t=[[],[]];for(let n=0;n<6;n++)if(e.patternData.CENTERS.pieces[n]!==n)throw new Error("non-oriented puzzles are not supported");for(let n=0;n<12;n++)t[0].push(y(p[e.patternData.EDGES.pieces[n]],e.patternData.EDGES.orientation[n]));for(let n=0;n<8;n++)t[1].push(y(f[e.patternData.CORNERS.pieces[n]],e.patternData.CORNERS.orientation[n]));return t.push(h),t}(e);return w.map(e=>{let[n,r,i]=e;return t[n][r][i]}).join("")}function x(e,t){const n=new a.EZ(e.kpuzzle,{EDGES:e.patternData.EDGES,CORNERS:e.patternData.CORNERS,CENTERS:{pieces:e.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}}).experimentalToTransformation(),r=new a.EZ(t.kpuzzle,{EDGES:t.patternData.EDGES,CORNERS:t.patternData.CORNERS,CENTERS:{pieces:t.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}}).experimentalToTransformation();return n.isIdentical(r)}var v=[["R U'","R2 B","D2 B2","D' L B'","R' U'","B","D B2","R' B","L' U","L2 B'","B2","D L B'","L U","B'","U'","R B","D' B2","L B'","U2","U L' B'","","U' L' B'","U","L' B'"],["F2 L2","F' L'","R' F L2","D' L2","F L2","F2 L'","R' F' L'","R2 F L2","R2 F2 L'","L2","F L'","D' L","D2 L2","R2 F' L'","D L","","L2 F L'","L F' L2","L F L'","F' L2","L'","D L2","D F L'","L"],["R B U2 B'","R2 B U' B'","F2 B U B'","F B2 L' B2","B2 L B2","B U' B'","R2 B U2 B'","R' B U' B'","B2 L' B2","F B U B'","B2 U' B2","B' L B","L F' B D' B'","B' U' B2 D B'","B U2 B'","R B U' B'","B2 L2 B2","D' B' L B","B U B'","F' B2 L' B2","","B2 L' B' U' B'"],["U F2 L2 U'","F' U L' U'","F2 U L' U'","U F L2 U'","U2 B2 U2","R' U' B U","D2 U L U'","D U2 B' U2","U L2 U'","F U L' U'","D U L U'","U2 B' U2","","U2 B' U' L' U'","U2 L' U2","U' B U","U L U'","D' U2 B' U2","U L' U'","U2 B U2"],["R' D' F2","F'","F2","D R F'","R D' F2","R2 F'","D' F2","R F'","F2 R' D' F2","F","D2 F2","D' R F'","R2 D' F2","R' F'","D F2","D2 R F'","","F R' D' F2"],["R' D2 F' D F","R F2 R2 F2","R2 F' D2 F","F' R2 D2 F","L D' L'","D F' D2 F","F2 R2 F2","R F' D2 F","F' R2 D' F","F' R' D2 F","F2 R' F2","L D L'","F' R D' F","F2 R F2","F' D2 F","","L D2 R D' L'","F' D2 F' R F2","D2 R2 F2 R2 F2","D F' D' F","F' D F"],["U F2 U'","R U F' U'","D R U F2 U'","U F U'","R2 U F2 U'","R' U F' U'","R U F2 U'","R2 U F' U'","","U L D L' F U'","F2 D' R D F2","D2 U F U'","R' U F2 U'","U F' U'","F2 D2 R D2 F2","D U F U'"],["R2","R' B' D B","D R'","F' R2 F","","R B' D B","R'","B' D B","D' R'","D2 F' R2 F","R","R2 B' D B","D2 R'","B' D' B"],["R2 D' R2","F' R' F R","R D' R2 D R'","D2 R2 D2 R2","R' D' F' R F","U F D F' U'","","R2 D2 B R' B' R'","R' F D' F2 R F","R2 D R2","F2 U F U' F","R' D F' R F","D R2 D2 R2","U F D' F' U'","D R' D2 F' R F","R2 D2 R2","U F D2 F' U'","R' D2 F' R F"],["B R B'","F D F' B R2 B'","D B R2 B'","D2 B R' B'","B R2 B'","D B R' B'","D' B R2 B'","B R' B'","","B R2 B' D B R' B'","D2 B R2 B'","D' B R' B'"],["","R' D R F D2 F'","R' D R","D F D' F'","R F' R' F","F D' F'","R' D' R","F D2 F'","R' D2 R","F D F'"],["","F2 D2 R F' R' D2 F' D2 F'","F2 D2 F' D' F D' F' D2 F'","F2 D F2 D F2 D2 F2","D2 F L D2 L' D2 F'","D F D2 L D2 L' F'","R' D B' D2 B D' R","R' D2 B' D2 B R","F D2 F' D F D F'","F D' L D2 L' D F'","B D' F D B' D' F'","F D2 L D2 L' F'","F D' L D L' D F'","F L D2 L' D2 F'","R' B' D2 B D2 R"],["D'","F L D L' D' F'","D2","L B D B' D' L'","D","B' L' D' L D B","","D F L D L' D' F'"],["F' D2 F D F' D F","F' D' R' D R F","F' R' D' R D F","B D R D' R' B'","","D B' D' L' D L B"],["D F D F' D F D2 F'","F' U2 B' R' B U2 F' L F' L' F'","","D2 L D L2 F L F2 D F"],["L B' L' F L B L' F'","F2 U F' D2 F U' F' D2 F'","D' F' D B D' F D B'","F L2 F R2 F' L2 F R2 F2","D B D' F' D B' D' F","R F L F' R' F L' F'","","D2 B L' U2 L B' D2 B L' U2 L B'","D2 F R' U2 R F' D2 F R' U2 R F'","R F L' F' R' F L F'","D F D' B' D F' D' B","L2 F2 L' B2 L F2 L' B2 L'"],["L B R' B' L' B R B'","R' B R F' R' B' R F","L D2 L U L' D2 L U' L2","","D2 B' D2 F D' L2 F L2 F' D2 B D' F'","D2 F' R' F R2 B' D2 B D2 R' F D2 F'","L B L' F L B' L' F'","F' D2 F' U' F D2 F' U F2","D' B' D F D' B D F'"],["","D2 F' L U2 L' F D2 F' L U2 L' F","D2 B' R U2 R' B D2 B' R U2 R' B"]];async function D(){const e=await r.SB["3x3x3"].kpuzzle();let t=e.defaultPattern();for(const n of v)t=t.applyAlg(o.BE.fromString((0,s.Jy)(n)));return function(e,t){if(x(e.defaultPattern(),t))return!1;for(const n of"ULFRBD")for(let r=1;r<4;r++)if(x(e.moveToTransformation(new o.yU(n,r)).toKPattern(),t))return!1;return!0}(e,t)?t:D()}async function R(e){return c(),o.BE.fromString((await d).solvePattern(g(e)))}async function S(){return R(await D())}async function L(){(await d).initialize()}var b=[[null,"Rw","Rw2","Rw'","Fw","Fw'"],[null,"Dw","Dw2","Dw'"]];async function F(){return m(await S(),b)}},453:(e,t,n)=>{n.d(t,{EZ:()=>y,e1:()=>g});var r=n(908);function i(e,t,n){const r={};for(const i of e.orbits){const e=t[i.orbitName],a=n[i.orbitName];if(l(i.numOrientations,a))r[i.orbitName]=e;else if(l(i.numOrientations,e))r[i.orbitName]=a;else{const t=new Array(i.numPieces);if(1===i.numOrientations){for(let n=0;n<i.numPieces;n++)t[n]=e.permutation[a.permutation[n]];r[i.orbitName]={permutation:t,orientationDelta:e.orientationDelta}}else{const n=new Array(i.numPieces);for(let r=0;r<i.numPieces;r++)n[r]=(e.orientationDelta[a.permutation[r]]+a.orientationDelta[r])%i.numOrientations,t[r]=e.permutation[a.permutation[r]];r[i.orbitName]={permutation:t,orientationDelta:n}}}}return r}function a(e,t,n){const r={};for(const i of e.orbits){const e=t[i.orbitName],a=n[i.orbitName];if(l(i.numOrientations,a))r[i.orbitName]=e;else{const t=new Array(i.numPieces);if(1===i.numOrientations){for(let r=0;r<i.numPieces;r++)t[r]=e.pieces[a.permutation[r]];const n={pieces:t,orientation:e.orientation};r[i.orbitName]=n}else{const n=new Array(i.numPieces),o=e.orientationMod?new Array(i.numPieces):void 0;for(let r=0;r<i.numPieces;r++){const s=a.permutation[r];let u=i.numOrientations;if(e.orientationMod){const t=e.orientationMod[s];o[r]=t,u=t||i.numOrientations}n[r]=(e.orientation[s]+a.orientationDelta[r])%u,t[r]=e.pieces[s]}const s={pieces:t,orientation:n};o&&(s.orientationMod=o),r[i.orbitName]=s}}}return r}var o=new Map;function s(e){const t=o.get(e);if(t)return t;const n=new Array(e),r=new Array(e);for(let a=0;a<e;a++)n[a]=a,r[a]=0;const i={permutation:n,orientationDelta:r};return o.set(e,i),i}var u=class e{constructor(e,t){this.kpuzzle=e,this.transformationData=t}toJSON(){return{experimentalPuzzleName:this.kpuzzle.name(),transformationData:this.transformationData}}invert(){return new e(this.kpuzzle,d(this.kpuzzle,this.transformationData))}#e;isIdentityTransformation(){return this.#e??=this.isIdentical(this.kpuzzle.identityTransformation())}static experimentalConstructIdentity(t){const n=new e(t,function(e){const t={};for(const n of e.orbits)t[n.orbitName]=s(n.numPieces);return t}(t.definition));return n.#e=!0,n}isIdentical(e){return function(e,t,n){for(const r of e.definition.orbits)if(!c(r,t[r.orbitName],n[r.orbitName]))return!1;return!0}(this.kpuzzle,this.transformationData,e.transformationData)}apply(e){return this.applyTransformation(this.kpuzzle.toTransformation(e))}applyTransformation(t){if(this.kpuzzle!==t.kpuzzle)throw new Error(`Tried to apply a transformation for a KPuzzle (${t.kpuzzle.name()}) to a different KPuzzle (${this.kpuzzle.name()}).`);return this.#e?new e(this.kpuzzle,t.transformationData):t.#e?new e(this.kpuzzle,this.transformationData):new e(this.kpuzzle,i(this.kpuzzle.definition,this.transformationData,t.transformationData))}applyMove(e){return this.applyTransformation(this.kpuzzle.moveToTransformation(e))}applyAlg(e){return this.applyTransformation(this.kpuzzle.algToTransformation(e))}toKPattern(){return y.fromTransformation(this)}repetitionOrder(){return function(e,t){let n=1;for(const r of e.orbits){const e=t.transformationData[r.orbitName],i=new Array(r.numPieces);for(let t=0;t<r.numPieces;t++)if(!i[t]){let a=t,o=0,s=0;for(;i[a]=!0,o+=e.orientationDelta[a],s+=1,a=e.permutation[a],a!==t;);0!==o&&(s=s*r.numOrientations/w(r.numOrientations,Math.abs(o))),n=n*s/w(n,s)}}return n}(this.kpuzzle.definition,this)}selfMultiply(t){return new e(this.kpuzzle,p(this.kpuzzle,this.transformationData,t))}};function l(e,t){t.permutation||console.log(t);const{permutation:n}=t,r=n.length;for(let i=0;i<r;i++)if(n[i]!==i)return!1;if(e>1){const{orientationDelta:e}=t;for(let t=0;t<r;t++)if(0!==e[t])return!1}return!0}function c(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};for(let i=0;i<e.numPieces;i++){if(!r?.ignorePieceOrientations&&t.orientationDelta[i]!==n.orientationDelta[i])return!1;if(!r?.ignorePiecePermutation&&t.permutation[i]!==n.permutation[i])return!1}return!0}function m(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};for(let i=0;i<e.numPieces;i++){if(!r?.ignorePieceOrientations&&(t.orientation[i]!==n.orientation[i]||(t.orientationMod?.[i]??0)!==(n.orientationMod?.[i]??0)))return!1;if(!r?.ignorePieceIndices&&t.pieces[i]!==n.pieces[i])return!1}return!0}function d(e,t){const n={};for(const r of e.definition.orbits){const e=t[r.orbitName];if(l(r.numOrientations,e))n[r.orbitName]=e;else if(1===r.numOrientations){const t=new Array(r.numPieces);for(let n=0;n<r.numPieces;n++)t[e.permutation[n]]=n;n[r.orbitName]={permutation:t,orientationDelta:e.orientationDelta}}else{const t=new Array(r.numPieces),i=new Array(r.numPieces);for(let n=0;n<r.numPieces;n++){const a=e.permutation[n];t[a]=n,i[a]=(r.numOrientations-e.orientationDelta[n]+r.numOrientations)%r.numOrientations}n[r.orbitName]={permutation:t,orientationDelta:i}}}return n}function p(e,t,n){if(1===n)return t;if(n<0)return p(e,d(e,t),-n);if(0===n){const{transformationData:t}=e.identityTransformation();return t}let r=t;2!==n&&(r=p(e,t,Math.floor(n/2)));const a=i(e.definition,r,r);return n%2===0?a:i(e.definition,t,a)}var f=class extends r.Yp{traverseAlg(e,t){let n=null;for(const r of e.childAlgNodes())n=n?n.applyTransformation(this.traverseAlgNode(r,t)):this.traverseAlgNode(r,t);return n??t.identityTransformation()}traverseGrouping(e,t){const n=this.traverseAlg(e.alg,t);return new u(t,p(t,n.transformationData,e.amount))}traverseMove(e,t){return t.moveToTransformation(e)}traverseCommutator(e,t){const n=this.traverseAlg(e.A,t),r=this.traverseAlg(e.B,t);return n.applyTransformation(r).applyTransformation(n.invert()).applyTransformation(r.invert())}traverseConjugate(e,t){const n=this.traverseAlg(e.A,t),r=this.traverseAlg(e.B,t);return n.applyTransformation(r).applyTransformation(n.invert())}traversePause(e,t){return t.identityTransformation()}traverseNewline(e,t){return t.identityTransformation()}traverseLineComment(e,t){return t.identityTransformation()}},h=(0,r.RU)(f);function w(e,t){return t?w(t,e%t):e}var y=class e{constructor(e,t){this.kpuzzle=e,this.patternData=t}toJSON(){return{experimentalPuzzleName:this.kpuzzle.name(),patternData:this.patternData}}static fromTransformation(t){const n=a(t.kpuzzle.definition,t.kpuzzle.definition.defaultPattern,t.transformationData);return new e(t.kpuzzle,n)}apply(e){return this.applyTransformation(this.kpuzzle.toTransformation(e))}applyTransformation(t){if(t.isIdentityTransformation())return new e(this.kpuzzle,this.patternData);const n=a(this.kpuzzle.definition,this.patternData,t.transformationData);return new e(this.kpuzzle,n)}applyMove(e){return this.applyTransformation(this.kpuzzle.moveToTransformation(e))}applyAlg(e){return this.applyTransformation(this.kpuzzle.algToTransformation(e))}isIdentical(e){return function(e,t,n){for(const r of e.definition.orbits)if(!m(r,t[r.orbitName],n[r.orbitName]))return!1;return!0}(this.kpuzzle,this.patternData,e.patternData)}experimentalToTransformation(){if(!this.kpuzzle.canConvertDefaultPatternToUniqueTransformation())return null;const e={};for(const[t,n]of Object.entries(this.patternData)){const r={permutation:n.pieces,orientationDelta:n.orientation};e[t]=r}return new u(this.kpuzzle,e)}experimentalIsSolved(e){if(!this.kpuzzle.definition.experimentalIsPatternSolved)throw new Error("`KPattern.experimentalIsPatternSolved()` is not supported for this puzzle at the moment.");return this.kpuzzle.definition.experimentalIsPatternSolved(this,e)}},g=class{constructor(e,t){this.definition=e,this.experimentalPGNotation=t?.experimentalPGNotation}experimentalPGNotation;#t;lookupOrbitDefinition(e){return this.#t||=(()=>{const e={};for(const t of this.definition.orbits)e[t.orbitName]=t;return e})(),this.#t[e]}name(){return this.definition.name}identityTransformation(){return u.experimentalConstructIdentity(this)}#n=(()=>new Map)();moveToTransformation(e){"string"===typeof e&&(e=new r.yU(e));const t=e.toString(),n=this.#n.get(t);if(n)return new u(this,n);if(this.experimentalPGNotation){const n=this.experimentalPGNotation.lookupMove(e);if(!n)throw new Error(`could not map to internal move: ${e}`);return this.#n.set(t,n),new u(this,n)}const i=function(e,t){function n(t,n){const r=t.toString(),i=e.definition.moves[r];if(i)return p(e,i,n);const a=e.definition.derivedMoves?.[r];return a?p(e,e.algToTransformation(a).transformationData,n):void 0}const r=n(t.quantum,t.amount)??n(t,1)??n(t.invert,-1);if(r)return r;throw new Error(`Invalid move for KPuzzle (${e.name()}): ${t}`)}(this,e);return this.#n.set(t,i),new u(this,i)}algToTransformation(e){return"string"===typeof e&&(e=new r.BE(e)),h(e,this)}toTransformation(e){return"string"===typeof e||e?.is?.(r.BE)?this.algToTransformation(e):e?.is?.(r.yU)?this.moveToTransformation(e):e}defaultPattern(){return new y(this,this.definition.defaultPattern)}#r;canConvertDefaultPatternToUniqueTransformation(){return this.#r??=(()=>{for(const e of this.definition.orbits){const t=new Array(e.numPieces).fill(!1);for(const n of this.definition.defaultPattern[e.orbitName].pieces)t[n]=!0;for(const e of t)if(!e)return!1}return!0})()}}},528:(e,t,n)=>{n.d(t,{AJ:()=>w,Ag:()=>U,HT:()=>o,Ik:()=>S,Ly:()=>E,P$:()=>te,Yi:()=>Z,Z2:()=>b,_j:()=>L,_l:()=>ee,_z:()=>T,ee:()=>I,kg:()=>_,su:()=>q,tH:()=>y,tY:()=>F});var r=n(453),i=n(908),a=class e extends Promise{constructor(e){super(e=>{e()}),this._executor=e}static from(t){return new e(e=>{e(t())})}static resolve(t){return new e(e=>{e(t)})}static reject(t){return new e((e,n)=>{n(t)})}then(e,t){return this._promise=this._promise||new Promise(this._executor),this._promise.then(e,t)}catch(e){return this._promise=this._promise||new Promise(this._executor),this._promise.catch(e)}};function o(e){return new a(t=>{t(e())})}var s=class{stickerings=(()=>new Map)();constructor(e,t){for(const n of e.definition.orbits)this.stickerings.set(n.orbitName,new Array(n.numPieces).fill(t))}},u="regular",l="ignored",c="oriented",m="invisible",d="dim",p="mystery",f={Regular:{facelets:[u,u,u,u,u]},Ignored:{facelets:[l,l,l,l,l]},OrientationStickers:{facelets:[c,c,c,c,c]},IgnoreNonPrimary:{facelets:[u,l,l,l,l]},Invisible:{facelets:[m,m,m,m,m]},PermuteNonPrimary:{facelets:[d,u,u,u,u]},Dim:{facelets:[d,d,d,d,d]},Ignoriented:{facelets:[d,l,l,l,l]},OrientationWithoutPermutation:{facelets:[c,l,l,l,l]},ExperimentalOrientationWithoutPermutation2:{facelets:["experimentalOriented2",l,l,l,l]},Mystery:{facelets:[p,p,p,p,p]}};function h(e){return f[e]}var w=class extends s{constructor(e){super(e,"Regular")}set(e,t){for(const[n,r]of this.stickerings.entries())for(let i=0;i<r.length;i++)e.stickerings.get(n)[i]&&(r[i]=t);return this}toStickeringMask(){const e={orbits:{}};for(const[t,n]of this.stickerings.entries()){const r=[],i={pieces:r};e.orbits[t]=i;for(const e of n)r.push(h(e))}return e}},y=class{constructor(e){this.kpuzzle=e}and(e){const t=new s(this.kpuzzle,!1);for(const n of this.kpuzzle.definition.orbits)e:for(let r=0;r<n.numPieces;r++){t.stickerings.get(n.orbitName)[r]=!0;for(const i of e)if(!i.stickerings.get(n.orbitName)[r]){t.stickerings.get(n.orbitName)[r]=!1;continue e}}return t}or(e){const t=new s(this.kpuzzle,!1);for(const n of this.kpuzzle.definition.orbits)e:for(let r=0;r<n.numPieces;r++){t.stickerings.get(n.orbitName)[r]=!1;for(const i of e)if(i.stickerings.get(n.orbitName)[r]){t.stickerings.get(n.orbitName)[r]=!0;continue e}}return t}not(e){const t=new s(this.kpuzzle,!1);for(const n of this.kpuzzle.definition.orbits)for(let r=0;r<n.numPieces;r++)t.stickerings.get(n.orbitName)[r]=!e.stickerings.get(n.orbitName)[r];return t}all(){return this.and(this.moves([]))}move(e){const t=this.kpuzzle.moveToTransformation(e),n=new s(this.kpuzzle,!1);for(const r of this.kpuzzle.definition.orbits)for(let e=0;e<r.numPieces;e++)t.transformationData[r.orbitName].permutation[e]===e&&0===t.transformationData[r.orbitName].orientationDelta[e]||(n.stickerings.get(r.orbitName)[e]=!0);return n}moves(e){return e.map(e=>this.move(e))}orbits(e){const t=new s(this.kpuzzle,!1);for(const n of e)t.stickerings.get(n).fill(!0);return t}orbitPrefix(e){const t=new s(this.kpuzzle,!1);for(const n of this.kpuzzle.definition.orbits)n.orbitName.startsWith(e)&&t.stickerings.get(n.orbitName).fill(!0);return t}},g="Last Layer",x="Last Slot",v={"3x3x3":g,megaminx:g},D={"3x3x3":x,megaminx:x},R={full:{groups:{"3x3x3":"Stickering",megaminx:"Stickering"}},OLL:{groups:v},PLL:{groups:v},LL:{groups:v},EOLL:{groups:v},COLL:{groups:v},OCLL:{groups:v},CPLL:{groups:v},CLL:{groups:v},EPLL:{groups:v},ELL:{groups:v},ZBLL:{groups:v},LS:{groups:D},LSOLL:{groups:D},LSOCLL:{groups:D},ELS:{groups:D},CLS:{groups:D},ZBLS:{groups:D},VLS:{groups:D},WVLS:{groups:D},F2L:{groups:{"3x3x3":"CFOP (Fridrich)"}},Daisy:{groups:{"3x3x3":"CFOP (Fridrich)"}},Cross:{groups:{"3x3x3":"CFOP (Fridrich)"}},EO:{groups:{"3x3x3":"ZZ"}},EOline:{groups:{"3x3x3":"ZZ"}},EOcross:{groups:{"3x3x3":"ZZ"}},FirstBlock:{groups:{"3x3x3":"Roux"}},SecondBlock:{groups:{"3x3x3":"Roux"}},CMLL:{groups:{"3x3x3":"Roux"}},L10P:{groups:{"3x3x3":"Roux"}},L6E:{groups:{"3x3x3":"Roux"}},L6EO:{groups:{"3x3x3":"Roux"}},"2x2x2":{groups:{"3x3x3":"Petrus"}},"2x2x3":{groups:{"3x3x3":"Petrus"}},EODF:{groups:{"3x3x3":"Nautilus"}},G1:{groups:{"3x3x3":"FMC"}},L2C:{groups:{"4x4x4":"Reduction","5x5x5":"Reduction","6x6x6":"Reduction"}},PBL:{groups:{"2x2x2":"Ortega"}},"Void Cube":{groups:{"3x3x3":"Miscellaneous"}},invisible:{groups:{"3x3x3":"Miscellaneous"}},picture:{groups:{"3x3x3":"Miscellaneous"}},"centers-only":{groups:{"3x3x3":"Miscellaneous"}},"opposite-centers":{groups:{"4x4x4":"Reduction"}},"experimental-centers-U":{},"experimental-centers-U-D":{},"experimental-centers-U-L-D":{},"experimental-centers-U-L-B-D":{},"experimental-centers":{},"experimental-fto-fc":{groups:{fto:"Bencisco"}},"experimental-fto-f2t":{groups:{fto:"Bencisco"}},"experimental-fto-sc":{groups:{fto:"Bencisco"}},"experimental-fto-l2c":{groups:{fto:"Bencisco"}},"experimental-fto-lbt":{groups:{fto:"Bencisco"}},"experimental-fto-l3t":{groups:{fto:"Bencisco"}}};async function S(e,t){return(await async function(e,t){const n=await e.kpuzzle(),r=new w(n),i=new y(n),a=()=>i.move("U"),o=()=>i.or(i.moves(["U","D"])),s=()=>i.or(i.moves(["L","R"])),u=()=>i.not(s()),l=()=>i.not(a()),c=()=>i.orbitPrefix("CENTER"),m=e=>i.and([i.move(e),c()]),d=()=>i.orbitPrefix("EDGE"),p=e=>i.and([i.and(i.moves(e)),d()]),f=()=>i.or([i.orbitPrefix("CORNER"),i.orbitPrefix("C4RNER"),i.orbitPrefix("C5RNER")]),h=()=>i.or([u(),i.and([a(),d()])]),g=()=>i.and([a(),c()]),x=()=>i.and([i.and(i.moves(["F","R"])),d()]),v=()=>i.and([i.and(i.moves(["F","R"])),f(),i.not(a())]),D=()=>i.or([v(),x()]);function R(){r.set(l(),"Dim")}function S(){r.set(a(),"PermuteNonPrimary"),r.set(g(),"Dim")}function L(){r.set(a(),"IgnoreNonPrimary"),r.set(g(),"Regular")}function b(){r.set(a(),"Ignoriented"),r.set(g(),"Dim")}switch(t){case"full":break;case"PLL":R(),S();break;case"CLS":R(),r.set(v(),"Regular"),r.set(a(),"Ignoriented"),r.set(i.and([a(),c()]),"Dim"),r.set(i.and([a(),f()]),"IgnoreNonPrimary");break;case"OLL":R(),L();break;case"EOLL":R(),L(),r.set(i.and([a(),f()]),"Ignored");break;case"COLL":R(),r.set(i.and([a(),d()]),"Ignoriented"),r.set(i.and([a(),c()]),"Dim"),r.set(i.and([a(),f()]),"Regular");break;case"OCLL":R(),b(),r.set(i.and([a(),f()]),"IgnoreNonPrimary");break;case"CPLL":R(),r.set(i.and([f(),a()]),"PermuteNonPrimary"),r.set(i.and([i.not(f()),a()]),"Dim");break;case"CLL":R(),r.set(i.not(i.and([f(),a()])),"Dim");break;case"EPLL":R(),r.set(a(),"Dim"),r.set(i.and([a(),d()]),"PermuteNonPrimary");break;case"ELL":R(),r.set(a(),"Dim"),r.set(i.and([a(),d()]),"Regular");break;case"ELS":R(),L(),r.set(i.and([a(),f()]),"Ignored"),r.set(x(),"Regular"),r.set(v(),"Ignored");break;case"LL":R();break;case"F2L":r.set(a(),"Ignored");break;case"ZBLL":R(),r.set(a(),"PermuteNonPrimary"),r.set(g(),"Dim"),r.set(i.and([a(),f()]),"Regular");break;case"ZBLS":R(),r.set(D(),"Regular"),L(),r.set(i.and([a(),f()]),"Ignored");break;case"VLS":R(),r.set(D(),"Regular"),L();break;case"WVLS":R(),r.set(D(),"Regular"),r.set(i.and([a(),d()]),"Ignoriented"),r.set(i.and([a(),c()]),"Dim"),r.set(i.and([a(),f()]),"IgnoreNonPrimary");break;case"LS":R(),r.set(D(),"Regular"),r.set(a(),"Ignored"),r.set(g(),"Dim");break;case"LSOLL":R(),L(),r.set(D(),"Regular");break;case"LSOCLL":R(),b(),r.set(i.and([a(),f()]),"IgnoreNonPrimary"),r.set(D(),"Regular");break;case"EO":r.set(f(),"Ignored"),r.set(d(),"OrientationWithoutPermutation");break;case"EOline":r.set(f(),"Ignored"),r.set(d(),"OrientationWithoutPermutation"),r.set(i.and(i.moves(["D","M"])),"Regular");break;case"EOcross":r.set(d(),"OrientationWithoutPermutation"),r.set(i.move("D"),"Regular"),r.set(f(),"Ignored");break;case"CMLL":r.set(l(),"Dim"),r.set(h(),"Ignored"),r.set(i.and([a(),f()]),"Regular");break;case"L10P":r.set(i.not(h()),"Dim"),r.set(i.and([f(),a()]),"Regular");break;case"L6E":r.set(i.not(h()),"Dim");break;case"L6EO":r.set(i.not(h()),"Dim"),r.set(h(),"ExperimentalOrientationWithoutPermutation2"),r.set(i.and([c(),o()]),"ExperimentalOrientationWithoutPermutation2"),r.set(i.and([i.move("M"),i.move("E")]),"Ignored");break;case"Daisy":r.set(i.all(),"Ignored"),r.set(c(),"Dim"),r.set(i.and([i.move("D"),c()]),"Regular"),r.set(i.and([i.move("U"),d()]),"IgnoreNonPrimary");break;case"Cross":r.set(i.all(),"Ignored"),r.set(c(),"Dim"),r.set(i.and([i.move("D"),c()]),"Regular"),r.set(i.and([i.move("D"),d()]),"Regular");break;case"2x2x2":r.set(i.or(i.moves(["U","F","R"])),"Ignored"),r.set(i.and([i.or(i.moves(["U","F","R"])),c()]),"Dim");break;case"2x2x3":r.set(i.all(),"Dim"),r.set(i.or(i.moves(["U","F","R"])),"Ignored"),r.set(i.and([i.or(i.moves(["U","F","R"])),c()]),"Dim"),r.set(i.and([i.move("F"),i.not(i.or(i.moves(["U","R"])))]),"Regular");break;case"G1":r.set(i.all(),"ExperimentalOrientationWithoutPermutation2"),r.set(i.or(i.moves(["E"])),"OrientationWithoutPermutation"),r.set(i.and(i.moves(["E","S"])),"Ignored");break;case"L2C":r.set(i.or(i.moves(["L","R","B","D"])),"Dim"),r.set(i.not(c()),"Ignored");break;case"PBL":r.set(i.all(),"Ignored"),r.set(i.or(i.moves(["U","D"])),"PermuteNonPrimary");break;case"FirstBlock":r.set(i.not(i.and([i.and(i.moves(["L"])),i.not(a())])),"Ignored"),r.set(m("R"),"Dim");break;case"SecondBlock":r.set(i.not(i.and([i.and(i.moves(["L"])),i.not(a())])),"Ignored"),r.set(i.and([i.and(i.moves(["L"])),i.not(a())]),"Dim"),r.set(i.and([i.and(i.moves(["R"])),i.not(a())]),"Regular");break;case"EODF":R(),r.set(i.or([v(),i.and([a(),f()])]),"Ignored"),r.set(i.or([i.and([a(),d()]),x()]),"OrientationWithoutPermutation"),r.set(p(["D","F"]),"Regular"),r.set(m("F"),"Regular");break;case"Void Cube":r.set(c(),"Invisible");break;case"picture":case"invisible":r.set(i.all(),"Invisible");break;case"centers-only":r.set(i.not(c()),"Ignored");break;case"opposite-centers":r.set(i.not(i.and([c(),i.or(i.moves(["U","D"]))])),"Ignored");break;default:console.warn(`Unsupported stickering for ${e.id}: ${t}. Setting all pieces to dim.`),r.set(i.and(i.moves([])),"Dim")}return r}(e,t)).toStickeringMask()}async function L(e,t){const n=[],r=[];for(const[i,a]of Object.entries(R))a.groups&&(e in a.groups?n.push(i):t?.use3x3x3Fallbacks&&"3x3x3"in a.groups&&r.push(i));return n.concat(r)}function b(e){let t=null;return()=>t??=e()}async function F(e){return(await n.e(567).then(n.bind(n,567))).getPuzzleGeometryByName(e,{allMoves:!0,orientCenters:!0,addRotations:!0})}async function B(e,t,i){const a=await e,o=a.getKPuzzleDefinition(!0);o.name=t;const s=new((await n.e(567).then(n.bind(n,567))).ExperimentalPGNotation)(a,a.getOrbitsDef(!0));if(i){const e=new Set(i);for(const[t,n]of Object.entries(o.defaultPattern))e.has(t)&&(n.orientationMod=new Array(n.pieces.length).fill(1))}return new r.e1(s.remapKPuzzleDefinition(o),{experimentalPGNotation:s})}var E=class{pgId;id;fullName;inventedBy;inventionYear;#i;constructor(e){this.pgId=e.pgID,this.id=e.id,this.fullName=e.fullName,this.inventedBy=e.inventedBy,this.inventionYear=e.inventionYear,this.#i=e.setOrientationModTo1ForPiecesOfOrbits}#a;pg(){return this.#a??=F(this.pgId??this.id)}#o;basePG(){return this.#o??=async function(e){return(await n.e(567).then(n.bind(n,567))).getPuzzleGeometryByName(e)}(this.pgId??this.id)}#s;kpuzzle(){return this.#s??=B(this.pg(),this.id,this.#i)}#u;svg(){return this.#u??=(async()=>(await this.pg()).generatesvg())()}puzzleSpecificSimplifyOptionsPromise=(()=>N(this.kpuzzle.bind(this)))()},U=class extends E{stickeringMask(e){return S(this,e)}stickerings=()=>L(this.id,{use3x3x3Fallbacks:!0});algTransformData=(()=>ee)()};function N(e){return new a(async t=>{const n=await e();t({quantumMoveOrder:e=>n.moveToTransformation(new i.yU(e)).repetitionOrder()})})}var z={name:"3x3x3",orbits:[{orbitName:"EDGES",numPieces:12,numOrientations:2},{orbitName:"CORNERS",numPieces:8,numOrientations:3},{orbitName:"CENTERS",numPieces:6,numOrientations:4}],defaultPattern:{EDGES:{pieces:[0,1,2,3,4,5,6,7,8,9,10,11],orientation:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{pieces:[0,1,2,3,4,5,6,7],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{pieces:[0,1,2,3,4,5],orientation:[0,0,0,0,0,0],orientationMod:[1,1,1,1,1,1]}},moves:{U:{EDGES:{permutation:[1,2,3,0,4,5,6,7,8,9,10,11],orientationDelta:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[1,2,3,0,4,5,6,7],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[1,0,0,0,0,0]}},y:{EDGES:{permutation:[1,2,3,0,5,6,7,4,10,8,11,9],orientationDelta:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[1,2,3,0,7,4,5,6],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,2,3,4,1,5],orientationDelta:[1,0,0,0,0,3]}},x:{EDGES:{permutation:[4,8,0,9,6,10,2,11,5,7,1,3],orientationDelta:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[4,0,3,5,7,6,2,1],orientationDelta:[2,1,2,1,1,2,1,2]},CENTERS:{permutation:[2,1,5,3,0,4],orientationDelta:[0,3,0,1,2,2]}},L:{EDGES:{permutation:[0,1,2,11,4,5,6,9,8,3,10,7],orientationDelta:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[0,1,6,2,4,3,5,7],orientationDelta:[0,0,2,1,0,2,1,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[0,1,0,0,0,0]}},F:{EDGES:{permutation:[9,1,2,3,8,5,6,7,0,4,10,11],orientationDelta:[1,0,0,0,1,0,0,0,1,1,0,0]},CORNERS:{permutation:[3,1,2,5,0,4,6,7],orientationDelta:[1,0,0,2,2,1,0,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[0,0,1,0,0,0]}},R:{EDGES:{permutation:[0,8,2,3,4,10,6,7,5,9,1,11],orientationDelta:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[4,0,2,3,7,5,6,1],orientationDelta:[2,1,0,0,1,0,0,2]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[0,0,0,1,0,0]}},B:{EDGES:{permutation:[0,1,10,3,4,5,11,7,8,9,6,2],orientationDelta:[0,0,1,0,0,0,1,0,0,0,1,1]},CORNERS:{permutation:[0,7,1,3,4,5,2,6],orientationDelta:[0,2,1,0,0,0,2,1]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[0,0,0,0,1,0]}},D:{EDGES:{permutation:[0,1,2,3,7,4,5,6,8,9,10,11],orientationDelta:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[0,1,2,3,5,6,7,4],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[0,0,0,0,0,1]}},z:{EDGES:{permutation:[9,3,11,7,8,1,10,5,0,4,2,6],orientationDelta:[1,1,1,1,1,1,1,1,1,1,1,1]},CORNERS:{permutation:[3,2,6,5,0,4,7,1],orientationDelta:[1,2,1,2,2,1,2,1]},CENTERS:{permutation:[1,5,2,0,4,3],orientationDelta:[1,1,1,1,3,1]}},M:{EDGES:{permutation:[2,1,6,3,0,5,4,7,8,9,10,11],orientationDelta:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[0,1,2,3,4,5,6,7],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[4,1,0,3,5,2],orientationDelta:[2,0,0,0,2,0]}},E:{EDGES:{permutation:[0,1,2,3,4,5,6,7,9,11,8,10],orientationDelta:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[0,1,2,3,4,5,6,7],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,4,1,2,3,5],orientationDelta:[0,0,0,0,0,0]}},S:{EDGES:{permutation:[0,3,2,7,4,1,6,5,8,9,10,11],orientationDelta:[0,1,0,1,0,1,0,1,0,0,0,0]},CORNERS:{permutation:[0,1,2,3,4,5,6,7],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[1,5,2,0,4,3],orientationDelta:[1,1,0,1,0,1]}},u:{EDGES:{permutation:[1,2,3,0,4,5,6,7,10,8,11,9],orientationDelta:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[1,2,3,0,4,5,6,7],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,2,3,4,1,5],orientationDelta:[1,0,0,0,0,0]}},l:{EDGES:{permutation:[2,1,6,11,0,5,4,9,8,3,10,7],orientationDelta:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[0,1,6,2,4,3,5,7],orientationDelta:[0,0,2,1,0,2,1,0]},CENTERS:{permutation:[4,1,0,3,5,2],orientationDelta:[2,1,0,0,2,0]}},f:{EDGES:{permutation:[9,3,2,7,8,1,6,5,0,4,10,11],orientationDelta:[1,1,0,1,1,1,0,1,1,1,0,0]},CORNERS:{permutation:[3,1,2,5,0,4,6,7],orientationDelta:[1,0,0,2,2,1,0,0]},CENTERS:{permutation:[1,5,2,0,4,3],orientationDelta:[1,1,1,1,0,1]}},r:{EDGES:{permutation:[4,8,0,3,6,10,2,7,5,9,1,11],orientationDelta:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[4,0,2,3,7,5,6,1],orientationDelta:[2,1,0,0,1,0,0,2]},CENTERS:{permutation:[2,1,5,3,0,4],orientationDelta:[0,0,0,1,2,2]}},b:{EDGES:{permutation:[0,5,10,1,4,7,11,3,8,9,6,2],orientationDelta:[0,1,1,1,0,1,1,1,0,0,1,1]},CORNERS:{permutation:[0,7,1,3,4,5,2,6],orientationDelta:[0,2,1,0,0,0,2,1]},CENTERS:{permutation:[3,0,2,5,4,1],orientationDelta:[3,3,0,3,1,3]}},d:{EDGES:{permutation:[0,1,2,3,7,4,5,6,9,11,8,10],orientationDelta:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[0,1,2,3,5,6,7,4],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,4,1,2,3,5],orientationDelta:[0,0,0,0,0,1]}}},derivedMoves:{Uw:"u",Lw:"l",Fw:"f",Rw:"r",Bw:"b",Dw:"d",Uv:"y",Lv:"x'",Fv:"z",Rv:"x",Bv:"z'",Dv:"y'","2U":"u U'","2L":"l L'","2F":"f F'","2R":"r R'","2B":"b B'","2D":"d D'"}};function k(e){const t=e.patternData.CENTERS.pieces[0],n=e.patternData.CENTERS.pieces[5],r=e.patternData.CENTERS.pieces[1];let i=r;return t<r&&i--,n<r&&i--,[t,i]}var A=new Array(6).fill(0).map(()=>new Array(6));function P(e){const[t,n]=k(e),r=function(){{const e=["","z","x","z'","x'","x2"].map(e=>i.BE.fromString(e)),t=new i.BE("y");for(const n of e){let e=W.algToTransformation(n);for(let n=0;n<4;n++){e=e.applyAlg(t);const[n,r]=k(e.toKPattern());A[n][r]=e.invert()}}}return A}()[t][n];return e.applyTransformation(r)}var C=class extends i.Yp{traverseAlg(e,t){const n=[];for(const r of e.childAlgNodes())n.push(this.traverseAlgNode(r,t));return new i.BE(n)}traverseGrouping(e,t){return e.modified({alg:this.traverseAlg(e.alg,t)})}traverseMove(e,t){const n=(()=>{const{invertExceptByFamily:n}=t;return!!n&&!n.has(e.family)})();return e.modified({amount:n?-e.amount:e.amount,family:t.replaceMovesByFamily[e.family]??e.family})}traverseCommutator(e,t){return new i.k7(this.traverseAlg(e.A,t),this.traverseAlg(e.B,t))}traverseConjugate(e,t){return new i.NG(this.traverseAlg(e.A,t),this.traverseAlg(e.B,t))}traversePause(e,t){return e}traverseNewline(e,t){return e}traverseLineComment(e,t){return e}};(0,i.RU)(C);async function I(e,t){return(await n.e(567).then(n.bind(n,567))).getPuzzleGeometryByDesc(e,{allMoves:t?.allMoves??!0,orientCenters:t?.orientCenters??!0,addRotations:t?.addRotations??!0,...t})}async function T(e,t){return B(I(e,t),`description: ${e}`)}function O(e){const t=e.experimentalToTransformation().invert().transformationData.CORNERS;return 3*t.permutation[6]+t.orientationDelta[6]}var M=new Array(24),K=!1;function G(e){const t=O(e),{transformation:n,alg:r}=function(e){if(!K){const t=["","z","x","z'","x'","x2"].map(e=>i.BE.fromString(e)),n=new i.BE("y");for(const r of t){let t=e.algToTransformation(r);for(let e=0;e<4;e++){t=t.applyAlg(n);const e=O(t.toKPattern());M[e]={transformation:t.invert(),alg:r.concat(n)}}}}return M}(e.kpuzzle)[t];return{normalizedPattern:e.applyTransformation(n),normalizationAlg:r.invert()}}function q(e,t){return t.ignorePuzzleOrientation&&(e=G(e).normalizedPattern),!!e.experimentalToTransformation().isIdentityTransformation()}var W=new r.e1(z);z.experimentalIsPatternSolved=function(e,t){return t.ignorePuzzleOrientation&&(e=P(e)),t.ignoreCenterOrientation&&(e=new r.EZ(e.kpuzzle,{EDGES:e.patternData.EDGES,CORNERS:e.patternData.CORNERS,CENTERS:{pieces:e.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}})),!!e.experimentalToTransformation()?.isIdentityTransformation()};var _=b(()=>n.e(630).then(n.bind(n,630))),Z={KeyI:new i.yU("R"),KeyK:new i.yU("R'"),KeyW:new i.yU("B"),KeyO:new i.yU("B'"),KeyS:new i.yU("D"),KeyL:new i.yU("D'"),KeyD:new i.yU("L"),KeyE:new i.yU("L'"),KeyJ:new i.yU("U"),KeyF:new i.yU("U'"),KeyH:new i.yU("F"),KeyG:new i.yU("F'"),KeyC:new i.yU("l"),KeyR:new i.yU("l'"),KeyU:new i.yU("r"),KeyM:new i.yU("r'"),KeyX:new i.yU("d"),Comma:new i.yU("d'"),KeyT:new i.yU("x"),KeyY:new i.yU("x"),KeyV:new i.yU("x'"),KeyN:new i.yU("x'"),Semicolon:new i.yU("y"),KeyA:new i.yU("y'"),KeyP:new i.yU("z"),KeyQ:new i.yU("z'"),KeyZ:new i.yU("M'"),KeyB:new i.yU("M"),Period:new i.yU("M'"),Backquote:new i.vR};function $(e,t,n,r){const a=[];for(const o of e){const e=i.yU.fromString(o),{family:s,amount:u}=e;if(![-1,1].includes(u))throw new Error("Invalid config move");a.push({family:s,direction:u,type:t,from:n,to:r})}return a}var V={"x axis":{sliceDiameter:3,extendsThroughEntirePuzzle:!0,moveSourceInfos:[...$(["R"],0,0,3),...$(["L'"],1,0,3),...$(["r","Rw"],2,0,2),...$(["l'","Lw'"],3,0,2),...$(["M'"],4,1,2),...$(["x","Uv","Dv'"],5,0,3)]},"y axis":{sliceDiameter:3,extendsThroughEntirePuzzle:!0,moveSourceInfos:[...$(["U"],0,0,3),...$(["D'"],1,0,3),...$(["u","Uw"],2,0,2),...$(["d'","Dw'"],3,0,2),...$(["E'"],4,1,2),...$(["y","Uv","Dv'"],5,0,3)]},"z axis":{sliceDiameter:3,extendsThroughEntirePuzzle:!0,moveSourceInfos:[...$(["F"],0,0,3),...$(["B'"],1,0,3),...$(["f","Fw"],2,0,3),...$(["b'","Bw'"],3,0,3),...$(["S"],4,1,2),...$(["z","Fv","Bv'"],5,0,3)]}},Q={};for(const[ne,re]of Object.entries(V))for(const e of re.moveSourceInfos)Q[e.family]={axis:ne,moveSourceInfo:e};var H={};for(const ne of Object.keys(V)){const e={};H[ne]=e;for(const t of V[ne].moveSourceInfos)(e[t.type]??=[]).push(t)}var Y={};for(const ne of Object.keys(V)){const e=new Map;Y[ne]=e;for(const t of V[ne].moveSourceInfos)e.get(t.from)||e.set(t.from,t)}function j(e,t){const n=H[e][t]?.[0];if(!n)throw new Error(`Could not find a reference move (axis: ${e}, move source type: ${t})`);return n}function J(e,t,n,r){if(t+1===n){const n=Y[e].get(t);if(n)return new i.yU(new i.VL(n.family),r*n.direction)}const a=V[e],{sliceDiameter:o}=a;if(0===t&&n===o){const t=j(e,5);return new i.yU(new i.VL(t.family),r*t.direction)}const s=t+n>o;s&&([t,n]=[o-n,o-t]);let u=t+1,l=n;const c=u===l;c&&(l=null),1===u&&(u=null),c&&1===u&&(l=null),c||2!==l||(l=null);const m=j(e,c?s?1:0:s?3:2);return new i.yU(new i.VL(m.family,l,u),r*m.direction)}var X={quantumMoveOrder:()=>4,axis:{areQuantumMovesSameAxis:(e,t)=>Q[e.family].axis===Q[t.family].axis,simplifySameAxisMoves:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0===e.length)return[];const n=Q[e[0].family].axis,r=V[n],{sliceDiameter:i}=r,a=new Map;let o=null;function s(e,n){let r=(a.get(e)??0)+n;t&&(r=r%4+1-1),0===r?a.delete(e):a.set(e,r)}let u=0;for(const d of Array.from(e).reverse()){u++;const{moveSourceInfo:e}=Q[d.family],t=d.amount*e.direction;switch(e.type){case 0:{const e=(d.innerLayer??1)-1;s(e,t),s(e+1,-t);break}case 1:{const e=i-(d.innerLayer??1);s(e,t),s(e+1,-t);break}case 2:s((d.outerLayer??1)-1,t),s(d.innerLayer??2,-t);break;case 3:s(i-(d.innerLayer??2),t),s(i-((d.outerLayer??1)-1),-t);break;case 4:s(e.from,t),s(e.to,-t);break;case 5:s(0,t),s(i,-t)}[0,2].includes(a.size)&&(o={suffixLength:u,sliceDeltas:new Map(a)})}if(0===a.size)return[];if(!o)return e;let[l,c]=o.sliceDeltas.keys();l>c&&([l,c]=[c,l]);const m=o.sliceDeltas.get(l);return[...e.slice(0,-o.suffixLength),...0!==m?[J(n,l,c,m)]:[]]}}},ee={"\u2194 Mirror (M)":{replaceMovesByFamily:{L:"R",R:"L",l:"r",r:"l",Lw:"Rw",Rw:"Lw",Lv:"Rv",Rv:"Lv"},invertExceptByFamily:new Set(["x","M","m"])},"\u2922 Mirror (S)":{replaceMovesByFamily:{F:"B",B:"F",f:"b",b:"f",Fw:"Bw",Bw:"Fw",Fv:"Bv",Bv:"Fv"},invertExceptByFamily:new Set(["z","S","s"])},"\u2195 Mirror (E)":{replaceMovesByFamily:{U:"D",D:"U",u:"d",d:"u",Uw:"Dw",Dw:"Uw",Uv:"Dv",Dv:"Uv"},invertExceptByFamily:new Set(["y","E","e"])}},te={id:"3x3x3",fullName:"3\xd73\xd73 Cube",inventedBy:["Ern\u0151 Rubik"],inventionYear:1974,kpuzzle:b(async()=>W),svg:b(async()=>(await n.e(94).then(n.bind(n,94))).cube3x3x3SVG),llSVG:b(async()=>(await n.e(94).then(n.bind(n,94))).cube3x3x3LLSVG),llFaceSVG:b(async()=>(await n.e(94).then(n.bind(n,94))).cube3x3x3LLFaceSVG),pg:b(async()=>F("3x3x3")),stickeringMask:e=>S(te,e),stickerings:()=>L("3x3x3"),puzzleSpecificSimplifyOptions:X,keyMapping:async()=>Z,algTransformData:ee}},625:(e,t,n)=>{n.d(t,{SB:()=>U,en:()=>s});var r=n(528),i=n(453),a=n(908),o={333:{puzzleID:"3x3x3",eventName:"3x3x3 Cube",scramblesImplemented:"random-state"},222:{puzzleID:"2x2x2",eventName:"2x2x2 Cube",scramblesImplemented:"random-state"},444:{puzzleID:"4x4x4",eventName:"4x4x4 Cube",scramblesImplemented:"random-state"},555:{puzzleID:"5x5x5",eventName:"5x5x5 Cube",scramblesImplemented:"random-moves"},666:{puzzleID:"6x6x6",eventName:"6x6x6 Cube",scramblesImplemented:"random-moves"},777:{puzzleID:"7x7x7",eventName:"7x7x7 Cube",scramblesImplemented:"random-moves"},"333bf":{puzzleID:"3x3x3",eventName:"3x3x3 Blindfolded",scramblesImplemented:"random-state"},"333fm":{puzzleID:"3x3x3",eventName:"3x3x3 Fewest Moves",scramblesImplemented:"random-state"},"333oh":{puzzleID:"3x3x3",eventName:"3x3x3 One-Handed",scramblesImplemented:"random-state"},clock:{puzzleID:"clock",eventName:"Clock",scramblesImplemented:"random-state"},minx:{puzzleID:"megaminx",eventName:"Megaminx",scramblesImplemented:"random-moves"},pyram:{puzzleID:"pyraminx",eventName:"Pyraminx",scramblesImplemented:"random-state"},skewb:{puzzleID:"skewb",eventName:"Skewb",scramblesImplemented:"random-state"},sq1:{puzzleID:"square1",eventName:"Square-1",scramblesImplemented:"random-state"},"444bf":{puzzleID:"4x4x4",eventName:"4x4x4 Blindfolded",scramblesImplemented:"random-state"},"555bf":{puzzleID:"5x5x5",eventName:"5x5x5 Blindfolded",scramblesImplemented:"random-moves"},"333mbf":{puzzleID:"3x3x3",eventName:"3x3x3 Multi-Blind",scramblesImplemented:"random-state"}};var s={id:"2x2x2",fullName:"2\xd72\xd72 Cube",kpuzzle:(0,r.Z2)(async()=>{const e=new i.e1((await n.e(736).then(n.bind(n,736))).cube2x2x2JSON);return e.definition.experimentalIsPatternSolved=r.su,e}),svg:async()=>(await n.e(736).then(n.bind(n,736))).cube2x2x2SVG,llSVG:(0,r.Z2)(async()=>(await n.e(736).then(n.bind(n,736))).cube2x2x2LLSVG),pg:(0,r.Z2)(async()=>(0,r.tY)("2x2x2")),stickeringMask:e=>(0,r.Ik)(s,e),stickerings:()=>(0,r._j)("2x2x2",{use3x3x3Fallbacks:!0}),algTransformData:r._l},u={...r.Yi,KeyZ:new a.yU("m'"),KeyB:new a.yU("m"),Period:new a.yU("m'")},l=new r.Ag({id:"4x4x4",fullName:"4\xd74\xd74 Cube",inventedBy:["Peter Sebest\xe9ny"],inventionYear:1981});l.llSVG=(0,r.Z2)(async()=>(await n.e(812).then(n.bind(n,812))).cube4x4x4LLSVG),l.keyMapping=async()=>u,l.kpuzzle=(0,r.Z2)(async()=>{const e=await r.Ly.prototype.kpuzzle.call(l);e.definition.defaultPattern.CENTERS.pieces=[0,0,0,0,4,4,4,4,8,8,8,8,12,12,12,12,16,16,16,16,20,20,20,20];const{experimentalIsBigCubeSolved:t}=await(0,r.kg)();return e.definition.experimentalIsPatternSolved=t,e});var c=new r.Ag({id:"5x5x5",fullName:"5\xd75\xd75 Cube",inventedBy:["Udo Krell"],inventionYear:1981});async function m(e,t){const n=await e.kpuzzle(),i=new r.AJ(n),a=new r.tH(n),o=()=>a.and([a.move("U"),a.not(a.or(a.moves(["F","BL","BR"])))]),s=()=>a.and([a.move("U"),a.not(a.move("F"))]),u=()=>a.or([s(),a.and([a.move("F"),a.not(a.or(a.moves(["U","BL","BR"])))])]),l=()=>a.not(a.or([a.and([a.move("U"),a.move("F")]),a.and([a.move("F"),a.move("BL")]),a.and([a.move("F"),a.move("BR")]),a.and([a.move("BL"),a.move("BR")])])),c=()=>a.not(a.or([a.and([a.move("F"),a.move("BL")]),a.and([a.move("F"),a.move("BR")]),a.and([a.move("BL"),a.move("BR")])]));switch(t){case"full":break;case"experimental-fto-fc":i.set(a.not(o()),"Ignored");break;case"experimental-fto-f2t":i.set(a.not(s()),"Ignored"),i.set(o(),"Dim");break;case"experimental-fto-sc":i.set(a.not(u()),"Ignored"),i.set(s(),"Dim");break;case"experimental-fto-l2c":i.set(a.not(l()),"Ignored"),i.set(u(),"Dim");break;case"experimental-fto-lbt":i.set(a.not(c()),"Ignored"),i.set(l(),"Dim");break;case"experimental-fto-l3t":i.set(c(),"Dim");break;default:console.warn(`Unsupported stickering for ${e.id}: ${t}. Setting all pieces to dim.`),i.set(a.and(a.moves([])),"Dim")}return i.toStickeringMask()}async function d(){return["full","experimental-fto-fc","experimental-fto-f2t","experimental-fto-sc","experimental-fto-l2c","experimental-fto-lbt","experimental-fto-l3t"]}c.keyMapping=async()=>u,c.kpuzzle=(0,r.Z2)(async()=>{const e=await r.Ly.prototype.kpuzzle.call(c),t=[0,0,0,0,4,4,4,4,8,8,8,8,12,12,12,12,16,16,16,16,20,20,20,20];e.definition.defaultPattern.CENTERS.pieces=t,e.definition.defaultPattern.CENTERS2.pieces=t,e.definition.defaultPattern.CENTERS3.orientationMod=new Array(6).fill(1);const{experimentalIsBigCubeSolved:n}=await(0,r.kg)();return e.definition.experimentalIsPatternSolved=n,e});var p={KeyI:new a.yU("R"),KeyK:new a.yU("R'"),KeyW:new a.yU("B"),KeyO:new a.yU("B'"),KeyS:new a.yU("D"),KeyL:new a.yU("D'"),KeyD:new a.yU("L"),KeyE:new a.yU("L'"),KeyJ:new a.yU("U"),KeyF:new a.yU("U'"),KeyH:new a.yU("F"),KeyG:new a.yU("F'"),KeyN:new a.yU("Rv'"),KeyC:new a.yU("l"),KeyR:new a.yU("l'"),KeyU:new a.yU("r"),KeyM:new a.yU("r'"),KeyX:new a.yU("d"),Comma:new a.yU("d'"),KeyT:new a.yU("Lv'"),KeyY:new a.yU("Rv"),KeyV:new a.yU("Lv"),Semicolon:new a.yU("Uv"),KeyA:new a.yU("Uv'"),KeyP:new a.yU("BR'"),KeyQ:new a.yU("BL"),KeyZ:new a.yU("BL'"),KeyB:new a.yU("T"),Period:new a.yU("BR"),Backquote:new a.vR},f=new class extends r.Ly{constructor(){super({pgID:"skewb diamond",id:"baby_fto",fullName:"Baby FTO",inventedBy:["Uwe M\xe8ffert"],setOrientationModTo1ForPiecesOfOrbits:["CENTERS"]})}stickeringMask(e){return m(this,e)}svg=(()=>(0,r.Z2)(async()=>(await n.e(142).then(n.bind(n,142))).babyFTOSVG))();keyMapping=async()=>p},h={id:"clock",fullName:"Clock",inventedBy:["Christopher C. Wiggs","Christopher J. Taylor"],inventionYear:1988,kpuzzle:(0,r.Z2)(async()=>new i.e1((await n.e(736).then(n.bind(n,736))).clockJSON)),svg:(0,r.Z2)(async()=>(await n.e(736).then(n.bind(n,736))).clockSVG)},w=new class extends r.Ly{constructor(){super({pgID:"FTO",id:"fto",fullName:"Face-Turning Octahedron",inventedBy:["Karl Rohrbach","David Pitcher"],inventionYear:1983})}stickeringMask(e){return m(this,e)}stickerings=(()=>d)();svg=(()=>(0,r.Z2)(async()=>(await n.e(142).then(n.bind(n,142))).ftoSVG))();keyMapping=async()=>p;algTransformData=(()=>({"\u2194 Mirror (x)":{replaceMovesByFamily:{L:"R",R:"L",l:"r",r:"l",Lw:"Rw",Rw:"Lw",Lv:"Rv",Rv:"Lv",BL:"BR",BR:"BL",bl:"br",br:"bl",BLw:"BRw",BRw:"BLw",BLv:"BRv",BRv:"BLv"},invertExceptByFamily:new Set(["x"])}}))()},y="d f 0.56",g={id:"kilominx",fullName:"Kilominx",kpuzzle:(0,r.Z2)(()=>(0,r._z)(y,{includeCenterOrbits:!1,includeEdgeOrbits:!1})),pg:()=>(0,r.ee)(y,{includeCenterOrbits:!1,includeEdgeOrbits:!1}),svg:(0,r.Z2)(async()=>(await n.e(142).then(n.bind(n,142))).kilominxSVG)},x={id:"loopover",fullName:"Loopover",inventedBy:["Cary Huang"],inventionYear:2018,kpuzzle:(0,r.Z2)(async()=>new i.e1((await n.e(142).then(n.bind(n,142))).loopoverJSON)),svg:async()=>(await n.e(142).then(n.bind(n,142))).loopoverSVG};var v=(0,r.HT)(()=>(0,r._j)("megaminx"));function D(){return v}var R={KeyI:new a.yU("R"),KeyK:new a.yU("R'"),KeyW:new a.yU("B"),KeyO:new a.yU("B'"),KeyS:new a.yU("FR"),KeyL:new a.yU("FR'"),KeyD:new a.yU("L"),KeyE:new a.yU("L'"),KeyJ:new a.yU("U"),KeyF:new a.yU("U'"),KeyH:new a.yU("F"),KeyG:new a.yU("F'"),KeyC:new a.yU("Lw"),KeyR:new a.yU("Lw'"),KeyU:new a.yU("Rw"),KeyM:new a.yU("Rw'"),KeyX:new a.yU("d"),Comma:new a.yU("d'"),KeyT:new a.yU("Rv"),KeyY:new a.yU("Rv"),KeyV:new a.yU("Rv'"),KeyN:new a.yU("Rv'"),Semicolon:new a.yU("y"),KeyA:new a.yU("y'"),KeyP:new a.yU("z"),KeyQ:new a.yU("z'"),KeyZ:new a.yU("2L'"),KeyB:new a.yU("2R"),Period:new a.yU("2R'"),Backquote:new a.vR},S=new class extends r.Ly{constructor(){super({id:"megaminx",fullName:"Megaminx",inventionYear:1981})}stickeringMask(e){return async function(e,t){return(await D()).includes(t)?(0,r.Ik)(e,t):(console.warn(`Unsupported stickering for ${e.id}: ${t}. Setting all pieces to dim.`),(0,r.Ik)(e,"full"))}(this,e)}stickerings=(()=>D)();llSVG=(()=>(0,r.Z2)(async()=>(await n.e(738).then(n.bind(n,738))).megaminxLLSVG))();keyMapping=async()=>R},L={id:"melindas2x2x2x2",fullName:"Melinda's 2\xd72\xd72\xd72",inventedBy:["Melinda Green"],kpuzzle:(0,r.Z2)(async()=>new i.e1((await n.e(736).then(n.bind(n,736))).melindas2x2x2x2OrbitJSON)),svg:(0,r.Z2)(async()=>(await n.e(736).then(n.bind(n,736))).melindas2x2x2x2OrbitSVG)},b=new class extends r.Ly{constructor(){super({id:"pyraminx",fullName:"Pyraminx",inventedBy:["Uwe Meffert"]})}svg=(()=>(0,r.Z2)(async()=>(await n.e(736).then(n.bind(n,736))).pyraminxSVG))();algTransformData=(()=>({"\u2194 Mirror (x)":{replaceMovesByFamily:{L:"R",R:"L",l:"r",r:"l",Lw:"Rw",Rw:"Lw",Lv:"Rv",Rv:"Lv"},invertExceptByFamily:new Set([])}}))()},F={id:"redi_cube",fullName:"Redi Cube",inventedBy:["Oskar van Deventer"],inventionYear:2009,kpuzzle:(0,r.Z2)(async()=>new i.e1((await n.e(142).then(n.bind(n,142))).rediCubeJSON)),svg:async()=>(await n.e(142).then(n.bind(n,142))).rediCubeSVG},B={id:"square1",fullName:"Square-1",inventedBy:["Karel Hr\u0161el","Vojtech Kopsk\xfd"],inventionYear:1990,kpuzzle:(0,r.Z2)(async()=>new i.e1((await n.e(736).then(n.bind(n,736))).sq1HyperOrbitJSON)),svg:(0,r.Z2)(async()=>(await n.e(736).then(n.bind(n,736))).sq1HyperOrbitSVG)},E={id:"tri_quad",fullName:"TriQuad",inventedBy:["Bram Cohen","Carl Hoff"],inventionYear:2018,kpuzzle:(0,r.Z2)(async()=>new i.e1((await n.e(736).then(n.bind(n,736))).triQuadJSON)),svg:(0,r.Z2)(async()=>(await n.e(736).then(n.bind(n,736))).triQuadSVG)},U={"3x3x3":r.P$,"2x2x2":s,"4x4x4":l,"5x5x5":c,"6x6x6":new r.Ag({id:"6x6x6",fullName:"6\xd76\xd76 Cube"}),"7x7x7":new r.Ag({id:"7x7x7",fullName:"7\xd77\xd77 Cube"}),"40x40x40":new r.Ag({id:"40x40x40",fullName:"40\xd740\xd740 Cube"}),clock:h,megaminx:S,pyraminx:b,skewb:new r.Ly({id:"skewb",fullName:"Skewb",inventedBy:["Tony Durham"]}),square1:B,fto:w,gigaminx:new r.Ly({id:"gigaminx",fullName:"Gigaminx",inventedBy:["Tyler Fox"],inventionYear:2006}),master_tetraminx:new r.Ly({pgID:"master tetraminx",id:"master_tetraminx",fullName:"Master Tetraminx",inventedBy:["Katsuhiko Okamoto"],inventionYear:2002}),kilominx:g,redi_cube:F,melindas2x2x2x2:L,loopover:x,tri_quad:E,baby_fto:f}},908:(e,t,n)=>{n.d(t,{BE:()=>V,MF:()=>l,NG:()=>o,RU:()=>W,VL:()=>U,Yp:()=>G,aU:()=>k,k7:()=>a,vR:()=>d,wr:()=>q,yU:()=>N});var r=class{is(e){return this instanceof e}as(e){return this instanceof e?this:null}},i=class extends r{constructor(){super()}get log(){return console.log.bind(console,this,this.toString())}};var a=class e extends i{#l;#c;constructor(e,t){super(),this.#l=$(e),this.#c=$(t)}get A(){return this.#l}get B(){return this.#c}isIdentical(t){const n=t.as(e);return!(!n?.A.isIdentical(this.A)||!n?.B.isIdentical(this.B))}invert(){return new e(this.#c,this.#l)}experimentalExpand(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;return function*(){n??=1/0,0===n?yield 1===t?e:e.invert():1===t?(yield*e.A.experimentalExpand(1,n-1),yield*e.B.experimentalExpand(1,n-1),yield*e.A.experimentalExpand(-1,n-1),yield*e.B.experimentalExpand(-1,n-1)):(yield*e.B.experimentalExpand(1,n-1),yield*e.A.experimentalExpand(1,n-1),yield*e.B.experimentalExpand(-1,n-1),yield*e.A.experimentalExpand(-1,n-1))}()}toString(e){return`[${this.#l.toString(e)}, ${this.#c.toString(e)}]`}},o=class e extends i{#l;#c;constructor(e,t){super(),this.#l=$(e),this.#c=$(t)}get A(){return this.#l}get B(){return this.#c}isIdentical(t){const n=t.as(e);return!(!n?.A.isIdentical(this.A)||!n?.B.isIdentical(this.B))}invert(){return new e(this.#l,this.#c.invert())}*experimentalExpand(e,t){t??=1/0,0===t?yield 1===e?this:this.invert():(yield*this.A.experimentalExpand(1,t-1),yield*this.B.experimentalExpand(e,t-1),yield*this.A.experimentalExpand(-1,t-1))}toString(e){return`[${this.A.toString(e)}: ${this.B.toString(e)}]`}},s=2147483647,u="2^31 - 1",l=class{#m=[];push(e){this.#m.push(e)}experimentalPushAlg(e){for(const t of e.childAlgNodes())this.push(t)}experimentalNumAlgNodes(){return this.#m.length}toAlg(){return new V(this.#m)}reset(){this.#m=[]}},c=class e extends i{#d;constructor(e){if(super(),e.includes("\n")||e.includes("\r"))throw new Error("LineComment cannot contain newline");this.#d=e}get text(){return this.#d}isIdentical(t){const n=t;return t.is(e)&&this.#d===n.#d}invert(){return this}experimentalExpand(){var e=this;return function*(){yield e}()}toString(e){return`//${this.#d}`}},m=class e extends i{toString(e){return"\n"}isIdentical(t){return t.is(e)}invert(){return this}experimentalExpand(){var e=this;return function*(){yield e}()}},d=class e extends i{experimentalNISSGrouping;toString(e){return"."}isIdentical(t){return t.is(e)}invert(){return this}experimentalExpand(){var e=this;return function*(){yield e}()}},p={caretNISSNotationEnabled:!0};function f(e,t){return e?parseInt(e):t}var h=/^(\d+)?('?)/,w=/^[_\dA-Za-z]/,y=/^((([1-9]\d*)-)?([1-9]\d*))?([_A-Za-z]+)/,g=/^[^\n]*/,x=/^(-?\d+), ?/,v=/^(-?\d+)\)/;function D(e){return(new b).parseAlg(e)}var R=Symbol("startCharIndex"),S=Symbol("endCharIndex");function L(e,t,n){const r=e;return r[R]=t,r[S]=n,r}var b=class{#p="";#f=0;#h=[];parseAlg(e){this.#p=e,this.#f=0;const t=this.parseAlgWithStopping([]);this.mustBeAtEndOfInput();const n=Array.from(t.childAlgNodes());if(this.#h.length>0)for(const o of this.#h.reverse())n.push(o);const r=new V(n),{[R]:i,[S]:a}=t;return L(r,i,a),r}parseMove(e){this.#p=e,this.#f=0;const t=this.parseMoveImpl();return this.mustBeAtEndOfInput(),t}parseQuantumMove(e){this.#p=e,this.#f=0;const t=this.parseQuantumMoveImpl();return this.mustBeAtEndOfInput(),t}mustBeAtEndOfInput(){if(this.#f!==this.#p.length)throw new Error("parsing unexpectedly ended early")}parseAlgWithStopping(e){let t=this.#f,n=this.#f;const r=new l;let i=!1;const s=e=>{if(i)throw new Error(`Unexpected character at index ${e}. Are you missing a space?`)};for(;this.#f<this.#p.length;){const u=this.#f;if(e.includes(this.#p[this.#f]))return L(r.toAlg(),t,n);if(this.tryConsumeNext(" "))i=!1,0===r.experimentalNumAlgNodes()&&(t=this.#f);else if(w.test(this.#p[this.#f])){s(u);const e=this.parseMoveImpl();r.push(e),i=!0,n=this.#f}else if(this.tryConsumeNext("(")){s(u);const e=this.tryRegex(x);if(e){const t=e[1],a=this.#f,o=this.parseRegex(v),s=L(new N(new U("U_SQ_"),parseInt(t)),u+1,u+1+t.length),l=L(new N(new U("D_SQ_"),parseInt(o[1])),a,this.#f-1),c=L(new V([s,l]),u+1,this.#f-1);r.push(L(new k(c),u,this.#f)),i=!0,n=this.#f}else{const e=this.parseAlgWithStopping([")"]);this.mustConsumeNext(")");const t=this.parseAmount();r.push(L(new k(e,t),u,this.#f)),i=!0,n=this.#f}}else if(this.tryConsumeNext("^")){if(!p.caretNISSNotationEnabled)throw new Error("Alg contained a caret but caret NISS notation is not enabled.");this.mustConsumeNext("(");const e=this.parseAlgWithStopping([")"]);this.popNext();const t=new k(e,-1),n=new d;t.experimentalNISSPlaceholder=n,n.experimentalNISSGrouping=t,this.#h.push(t),r.push(n)}else if(this.tryConsumeNext("[")){s(u);const e=this.parseAlgWithStopping([",",":"]),t=this.popNext(),l=this.parseAlgWithStopping(["]"]);let c;switch(this.mustConsumeNext("]"),t){case":":c=L(new o(e,l),u,this.#f),i=!0,n=this.#f;break;case",":c=L(new a(e,l),u,this.#f),i=!0,n=this.#f;break;default:throw new Error("unexpected parsing error")}const m=this.#f,d=this.parseAmount();if(1===d)r.push(c);else{const e=L(new V([c]),u,m),t=L(new k(e,d),u,this.#f);r.push(t)}i=!0,n=this.#f}else if(this.tryConsumeNext("\n"))r.push(L(new m,u,this.#f)),i=!1,n=this.#f;else if(this.tryConsumeNext("/"))if(this.tryConsumeNext("/")){s(u);const[e]=this.parseRegex(g);r.push(L(new c(e),u,this.#f)),i=!1,n=this.#f}else r.push(L(new N("_SLASH_"),u,this.#f)),i=!0,n=this.#f;else{if(!this.tryConsumeNext("."))throw new Error(`Unexpected character: ${this.popNext()}`);s(u),r.push(L(new d,u,this.#f)),i=!0,n=this.#f}}if(this.#f!==this.#p.length)throw new Error("did not finish parsing?");if(e.length>0)throw new Error("expected stopping");return L(r.toAlg(),t,n)}parseQuantumMoveImpl(){const[,,,e,t,n]=this.parseRegex(y);return new U(n,f(t,void 0),f(e,void 0))}parseMoveImpl(){const e=this.#f;if(this.tryConsumeNext("/"))return L(new N("_SLASH_"),e,this.#f);let t=this.parseQuantumMoveImpl(),[n,r]=this.parseAmountAndTrackEmptyAbsAmount();const i=this.parseMoveSuffix();if(i){if(n<0)throw new Error("uh-oh");if(("++"===i||"--"===i)&&1!==n)throw new Error("Pochmann ++ or -- moves cannot have an amount other than 1.");if(("++"===i||"--"===i)&&!r)throw new Error("Pochmann ++ or -- moves cannot have an amount written as a number.");if(("+"===i||"-"===i)&&r)throw new Error("Clock dial moves must have an amount written as a natural number followed by + or -.");i.startsWith("+")&&(t=t.modified({family:`${t.family}_${"+"===i?"PLUS":"PLUSPLUS"}_`})),i.startsWith("-")&&(t=t.modified({family:`${t.family}_${"-"===i?"PLUS":"PLUSPLUS"}_`}),n*=-1)}return L(new N(t,n),e,this.#f)}parseMoveSuffix(){return this.tryConsumeNext("+")?this.tryConsumeNext("+")?"++":"+":this.tryConsumeNext("-")?this.tryConsumeNext("-")?"--":"-":null}parseAmountAndTrackEmptyAbsAmount(){const e=this.#f,[,t,n]=this.parseRegex(h);if(t?.startsWith("0")&&"0"!==t)throw new Error(`Error at char index ${e}: An amount can only start with 0 if it's exactly the digit 0.`);return[f(t,1)*("'"===n?-1:1),!t]}parseAmount(){const e=this.#f,[,t,n]=this.parseRegex(h);if(t?.startsWith("0")&&"0"!==t)throw new Error(`Error at char index ${e}: An amount number can only start with 0 if it's exactly the digit 0.`);return f(t,1)*("'"===n?-1:1)}parseRegex(e){const t=e.exec(this.remaining());if(null===t)throw new Error("internal parsing error");return this.#f+=t[0].length,t}tryRegex(e){const t=e.exec(this.remaining());return null===t?null:(this.#f+=t[0].length,t)}remaining(){return this.#p.slice(this.#f)}popNext(){const e=this.#p[this.#f];return this.#f++,e}tryConsumeNext(e){return this.#p[this.#f]===e&&(this.#f++,!0)}mustConsumeNext(e){const t=this.popNext();if(t!==e)throw new Error(`expected \`${e}\` while parsing, encountered ${t}`);return t}},F=new Set;function B(e){F.has(e)||(console.warn(e),F.add(e))}var E=class{quantum;amount;constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.quantum=e,this.amount=t,!Number.isInteger(this.amount)||this.amount<-2147483648||this.amount>s)throw new Error(`AlgNode amount absolute value must be a non-negative integer below ${u}.`)}suffix(){let e="";const t=Math.abs(this.amount);return 1!==t&&(e+=t),this.amount<0&&(e+="'"),e}isIdentical(e){return this.quantum.isIdentical(e.quantum)&&this.amount===e.amount}*experimentalExpand(e,t){const n=Math.abs(this.amount),r=function(e){if(arguments.length>1&&void 0!==arguments[1]&&!arguments[1])return e;switch(e){case 1:return-1;case-1:return 1}}(e,this.amount<0);for(let i=0;i<n;i++)yield*this.quantum.experimentalExpand(r,t)}},U=class e extends r{#w;#y;#g;constructor(e,t,n){if(super(),this.#w=e,this.#y=t??null,this.#g=n??null,Object.freeze(this),null!==this.#y&&(!Number.isInteger(this.#y)||this.#y<1||this.#y>s))throw new Error(`QuantumMove inner layer must be a positive integer below ${u}.`);if(null!==this.#g&&(!Number.isInteger(this.#g)||this.#g<1||this.#g>s))throw new Error(`QuantumMove outer layer must be a positive integer below ${u}.`);if(null!==this.#g&&null!==this.#y&&this.#y<=this.#g)throw new Error("QuantumMove outer layer must be smaller than inner layer.");if(null!==this.#g&&null===this.#y)throw new Error("QuantumMove with an outer layer must have an inner layer")}static fromString(e){return function(e){return(new b).parseQuantumMove(e)}(e)}modified(t){return new e(t.family??this.#w,t.innerLayer??this.#y,t.outerLayer??this.#g)}isIdentical(t){const n=t;return t.is(e)&&this.#w===n.#w&&this.#y===n.#y&&this.#g===n.#g}get family(){return this.#w}get outerLayer(){return this.#g}get innerLayer(){return this.#y}experimentalExpand(){throw new Error("experimentalExpand() cannot be called on a `QuantumMove` directly.")}toString(e){let t=this.#w;return null!==this.#y&&(t=String(this.#y)+t,null!==this.#g&&(t=`${String(this.#g)}-${t}`)),t}},N=class e extends i{#x;constructor(){if(super(),"string"===typeof(arguments.length<=0?void 0:arguments[0]))return(arguments.length<=1?void 0:arguments[1])?void(this.#x=new E(U.fromString(arguments.length<=0?void 0:arguments[0]),arguments.length<=1?void 0:arguments[1])):e.fromString(arguments.length<=0?void 0:arguments[0]);this.#x=new E(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}isIdentical(t){const n=t.as(e);return!!n&&this.#x.isIdentical(n.#x)}invert(){return t=this,n=new e(this.#x.quantum,this.#v()?this.amount:-this.amount),R in t&&(n[R]=t[R]),S in t&&(n[S]=t[S]),n;var t,n}experimentalExpand(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function*(){1===t?yield e:yield e.modified({amount:-e.amount})}()}get quantum(){return this.#x.quantum}modified(t){return new e(this.#x.quantum.modified(t),t.amount??this.amount)}static fromString(e){return function(e){return(new b).parseMove(e)}(e)}get amount(){return this.#x.amount}get type(){return B("deprecated: type"),"blockMove"}get family(){return this.#x.quantum.family??void 0}get outerLayer(){return this.#x.quantum.outerLayer??void 0}get innerLayer(){return this.#x.quantum.innerLayer??void 0}#D;#v(){return this.isIdentical(this.#D??=new e("_SLASH_"))}toString(e){if("LGN"!==e?.notation){if(this.#v())return"/";if(this.family.endsWith("_PLUS_"))return this.#x.quantum.toString().slice(0,-6)+Math.abs(this.amount)+(this.amount<0?"-":"+");if(this.family.endsWith("_PLUSPLUS_")){const e=Math.abs(this.amount);return this.#x.quantum.toString().slice(0,-10)+(1===e?"":e)+(this.amount<0?"--":"++")}}return this.#x.quantum.toString(e)+this.#x.suffix()}},z=new class{quantumU_SQ_=null;quantumD_SQ_=null;format(e,t){if("LGN"===t?.notation)return null;if(1!==e.amount)return null;const n=this.tuple(e);return n?`(${n.map(e=>e.amount).join(", ")})`:null}tuple(e){if(1!==e.amount)return null;this.quantumU_SQ_||=new U("U_SQ_"),this.quantumD_SQ_||=new U("D_SQ_");const t=e.alg;if(2===t.experimentalNumChildAlgNodes()){const[e,n]=t.childAlgNodes();if(e.as(N)?.quantum.isIdentical(this.quantumU_SQ_)&&n.as(N)?.quantum.isIdentical(this.quantumD_SQ_))return[e,n]}return null}},k=class e extends i{#x;experimentalNISSPlaceholder;constructor(e,t){super();const n=$(e);this.#x=new E(n,t)}isIdentical(t){const n=t;return t.is(e)&&this.#x.isIdentical(n.#x)}get alg(){return this.#x.quantum}get amount(){return this.#x.amount}modified(t){return new e(t.alg??this.alg,t.amount??this.amount)}get experimentalRepetitionSuffix(){return this.#x.suffix()}invert(){const t=z.tuple(this);if(t){const[n,r]=t;return new e(new V([n.invert(),r.invert()]))}return new e(this.#x.quantum,-this.#x.amount)}experimentalExpand(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;return function*(){n??=1/0,0===n?yield 1===t?e:e.invert():yield*e.#x.experimentalExpand(t,n-1)}()}static fromString(){throw new Error("unimplemented")}#R(e){const t=this.#x.quantum.toString(e),n=this.alg.childAlgNodes(),{value:r}=n.next();return n.next().done&&(r?.is(a)||r?.is(o))?t:`(${t})`}toString(e){return z.format(this,e)??`${this.#R(e)}${this.#x.suffix()}`}experimentalAsSquare1Tuple(){return z.tuple(this)}};function A(e,t){return e instanceof t}function P(e){return A(e,k)||A(e,c)||A(e,a)||A(e,o)||A(e,N)||A(e,m)||A(e,d)}var C=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=e}cancelQuantum(){const{cancel:e}=this.config;return!0===e?"any-direction":!1===e?"none":e?.directional??"none"}cancelAny(){return this.config.cancel&&"none"!==this.cancelQuantum()}cancelPuzzleSpecificModWrap(){const{cancel:e}=this.config;return!0===e||!1===e?"canonical-centered":e?.puzzleSpecificModWrap?e?.puzzleSpecificModWrap:"same-direction"===e?.directional?"preserve-sign":"canonical-centered"}puzzleSpecificSimplifyOptions(){return this.config.puzzleLoader?.puzzleSpecificSimplifyOptions??this.config.puzzleSpecificSimplifyOptions}};function I(e,t){return e*Math.sign(t.amount)>=0}function T(e,t,n){const r=new C(n),i=Array.from(e.childAlgNodes());let a=[t];if(r.cancelAny()){let e;const n=r.puzzleSpecificSimplifyOptions()?.axis;if(n)e=e=>n.areQuantumMovesSameAxis(t.quantum,e.quantum);else{const n=t.quantum.toString();e=e=>e.quantum.toString()===n}const o="same-direction"===r.cancelQuantum(),s=new Map;let u;for(s.set(t.quantum.toString(),Math.sign(t.amount)),u=i.length-1;u>=0;u--){const t=i[u].as(N);if(!t)break;if(!e(t))break;const n=t.quantum.toString();if(o){const e=s.get(n);if(e&&!I(e,t))break;s.set(n,Math.sign(t.amount))}}const l=[...i.splice(u+1),t];if(n)a=n.simplifySameAxisMoves(l,"none"!==r.cancelPuzzleSpecificModWrap());else{const e=l.reduce((e,t)=>e+t.amount,0);if(1!==s.size)throw new Error("Internal error: multiple quantums when one was expected");a=[new N(t.quantum,e)]}}return a=a.map(e=>function(e){if("none"===r.cancelPuzzleSpecificModWrap())return e;const n=r.puzzleSpecificSimplifyOptions()?.quantumMoveOrder;if(!n)return e;const i=n(t.quantum);let a;switch(r.cancelPuzzleSpecificModWrap()){case"gravity":a=-Math.floor((i-(e.amount<0?0:1))/2);break;case"canonical-centered":a=-Math.floor((i-1)/2);break;case"canonical-positive":a=0;break;case"preserve-sign":a=e.amount<0?1-i:0;break;default:throw new Error("Unknown mod wrap")}const o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return((e-n)%t+t)%t+n}(e.amount,i,a);return e.modified({amount:o})}(e)).filter(e=>0!==e.amount),new V([...i,...a])}function O(e,t,n){const r=t.as(N);return r?T(e,r,n):new V([...e.childAlgNodes(),t])}function M(e,t,n){if(t.is(k))return e.traverseGrouping(t,n);if(t.is(N))return e.traverseMove(t,n);if(t.is(a))return e.traverseCommutator(t,n);if(t.is(o))return e.traverseConjugate(t,n);if(t.is(d))return e.traversePause(t,n);if(t.is(m))return e.traverseNewline(t,n);if(t.is(c))return e.traverseLineComment(t,n);throw new Error("unknown AlgNode")}function K(e){if(e.is(k)||e.is(N)||e.is(a)||e.is(o)||e.is(d)||e.is(m)||e.is(c))return e;throw new Error("internal error: expected AlgNode")}var G=class{traverseAlgNode(e,t){return M(this,e,t)}traverseIntoAlgNode(e,t){return K(this.traverseAlgNode(e,t))}},q=class extends G{traverseAlgNode(e){return M(this,e,void 0)}traverseIntoAlgNode(e){return K(this.traverseAlgNode(e))}};function W(e,t){const n=new e(...t??[]);return n.traverseAlg.bind(n)}var _=W(class extends G{#S;#L(){return this.#S??=new Map}#b(e){return{...e,depth:e.depth?e.depth-1:null}}*traverseAlg(e,t){if(0===t.depth)return void(yield*e.childAlgNodes());let n=[];const r=this.#b(t);for(const i of e.childAlgNodes())for(const e of this.traverseAlgNode(i,r))n=Array.from(O(new V(n),e,r).childAlgNodes());for(const i of n)yield i}*traverseGrouping(e,t){if(0===t.depth)return void(yield e);if(0===e.amount)return;const n=new k(this.traverseAlg(e.alg,this.#b(t)),e.amount);if(n.alg.experimentalIsEmpty())return;const r=this.#L().get(e);r&&(n.experimentalNISSPlaceholder=r,r.experimentalNISSGrouping=n),yield n}*traverseMove(e,t){yield e}#F(e,t,n){if(1===e.experimentalNumChildAlgNodes()&&1===t.experimentalNumChildAlgNodes()){const r=Array.from(e.childAlgNodes())[0]?.as(N),i=Array.from(t.childAlgNodes())[0]?.as(N);if(!r||!i)return!1;if(i.quantum.isIdentical(r.quantum))return!0;const a=new C(n);if(a.puzzleSpecificSimplifyOptions()?.axis?.areQuantumMovesSameAxis(r.quantum,i.quantum))return!0}return!1}*traverseCommutator(e,t){if(0===t.depth)return void(yield e);const n=this.#b(t),r=new a(this.traverseAlg(e.A,n),this.traverseAlg(e.B,n));r.A.experimentalIsEmpty()||r.B.experimentalIsEmpty()||r.A.isIdentical(r.B)||r.A.isIdentical(r.B.invert())||this.#F(r.A,r.B,t)||(yield r)}*traverseConjugate(e,t){if(0===t.depth)return void(yield e);const n=this.#b(t),r=new o(this.traverseAlg(e.A,n),this.traverseAlg(e.B,n));r.B.experimentalIsEmpty()||(r.A.experimentalIsEmpty()||r.A.isIdentical(r.B)||r.A.isIdentical(r.B.invert())||this.#F(r.A,r.B,t)?yield*e.B.childAlgNodes():yield r)}*traversePause(e,t){if(e.experimentalNISSGrouping){const t=new d;this.#L().set(e.experimentalNISSGrouping,t),yield t}else yield e}*traverseNewline(e,t){yield e}*traverseLineComment(e,t){yield e}});function Z(e){if(!e)return[];if(A(e,V))return e.childAlgNodes();if("string"===typeof e)return D(e).childAlgNodes();const t=e;if("function"===typeof t[Symbol.iterator])return t;throw new Error("Invalid AlgNode")}function $(e){return A(e,V)?e:new V(e)}var V=class e extends i{#m;constructor(e){super(),this.#m=Array.from(Z(e));for(const t of this.#m)if(!P(t))throw new Error("An alg can only contain alg nodes.")}isIdentical(t){const n=t;if(!t.is(e))return!1;const r=Array.from(this.#m),i=Array.from(n.#m);if(r.length!==i.length)return!1;for(let e=0;e<r.length;e++)if(!r[e].isIdentical(i[e]))return!1;return!0}invert(){return new e((t=Array.from(this.#m).map(e=>e.invert()),Array.from(t).reverse()));var t}experimentalExpand(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;return function*(){n??=1/0;for(const r of function(e,t){return-1===t?Array.from(e).reverse():e}(e.#m,t))yield*r.experimentalExpand(t,n)}()}expand(t){return new e(this.experimentalExpand(1,t?.depth??1/0))}*experimentalLeafMoves(){for(const e of this.experimentalExpand())e.is(N)&&(yield e)}concat(t){return new e(Array.from(this.#m).concat(Array.from(Z(t))))}experimentalIsEmpty(){for(const e of this.#m)return!1;return!0}static fromString(e){return D(e)}units(){return this.childAlgNodes()}*childAlgNodes(){for(const e of this.#m)yield e}experimentalNumUnits(){return this.experimentalNumChildAlgNodes()}experimentalNumChildAlgNodes(){return Array.from(this.#m).length}get type(){return B("deprecated: type"),"sequence"}toString(e){let t="",n=null;for(const r of this.#m){n&&(t+=Q(n,r));const i=r.as(d)?.experimentalNISSGrouping;if(i){if(-1!==i.amount)throw new Error("Invalid NISS Grouping amount!");t+=`^(${i.alg.toString(e)})`}else r.as(k)?.experimentalNISSPlaceholder||(t+=r.toString(e));n=r}return t}experimentalSimplify(t){return new e(_(this,t??{}))}simplify(e){return this.experimentalSimplify(e)}};function Q(e,t){return e.is(m)||t.is(m)||t.as(k)?.experimentalNISSPlaceholder?"":e.is(c)&&!t.is(m)?"\n":" "}new V([new N("R",1),new N("U",1),new N("R",-1),new N("U",1),new N("R",1),new N("U",-2),new N("R",-1)]),new V([new N("R",1),new N("U",2),new N("R",-1),new N("U",-1),new N("R",1),new N("U",-1),new N("R",-1)]),new V([new a(new V([new N("R",1),new N("U",1),new N("R",-2)]),new V([new o(new V([new N("R",1)]),new V([new N("U",1)]))]))]),new V([new N("R",1),new N("U",-1),new N("L",-1),new N("U",1),new N("R",-1),new N("U",-1),new N("L",1),new N("U",1)]),new V([new N("x",-1),new a(new V([new o(new V([new N("R",1)]),new V([new N("U",-1)]))]),new V([new N("D",1)])),new a(new V([new o(new V([new N("R",1)]),new V([new N("U",1)]))]),new V([new N("D",1)])),new N("x",1)]),new V([new o(new V([new N("F",1)]),new V([new a(new V([new N("U",1)]),new V([new N("R",1)]))]))]),new V([new o(new V([new N("R",2)]),new V([new a(new V([new N("F",2)]),new V([new N("R",-1),new N("B",-1),new N("R",1)]))]))]),new V([new N("F",1),new N("U",1),new N("R",1),new N("U",-1),new N("R",-1),new N("F",-1)]),new V([new N("R",1),new N("U",1),new N("R",-1),new N("U",-1),new N("R",-1),new N("F",1),new N("R",2),new N("U",-1),new N("R",-1),new N("U",-1),new N("R",1),new N("U",1),new N("R",-1),new N("F",-1)]),new V([new o(new V([new N("F",1)]),new V([new k(new V([new a(new V([new N("R",1)]),new V([new N("U",1)]))]),3)]))]),new V([new d,new d,new d])}}]);
//# sourceMappingURL=301.a19641c3.chunk.js.map